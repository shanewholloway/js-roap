<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <title>ROAP</title>

  <link rel='icon' href='data:image/png;base64,' />
  <link rel='stylesheet' crossorigin='anonymous' href='https://cdn.jsdelivr.net/npm/shoelace-css@1.0.0-beta24/dist/shoelace.css' />
  <style>
    body>main {
      max-width: 40em;
      margin: 2em auto;
    }
  </style>

  <script type='module' src='https://cdn.jsdelivr.net/npm/jsy-transpile/esm/jsy-script.min.js'></script>
</head>

<body>
  <main>
    <label>A <input id=aaa type=range min=0 max=255 value=95 /></label>
    <label>B <input id=bbb type=range min=0 max=255 value=45 /></label>
    <label>C <input id=ccc type=range min=0 max=255 value=225 /></label>
  </main>

  <jsy-script>
    import @{}
      ao_dom, ao_watch, ao_track, ao_push
    from './esm/index.mjs'

    const fun = window.fun = ao_push()
    fun @ 1942

    const ao_deps = window.ao_deps = ao_track @:
      a: ao_dom @ '#aaa'
      b: ao_dom @ '#bbb'
      c: ao_dom @ '#ccc'
      fun
    ao_deps.watch()

    console.log @ 'ao_deps[0]', ao_deps

    ::!>
      console.log @ 'ao_deps[1]', ao_deps
      await null
      console.log @ 'ao_deps[2]', ao_deps

      for await const tip of ao_deps ::
        console.log @ 'tip', tip
        console.log @ 'ao_deps[n]', ao_deps

  </jsy-script>
</body>
</html>
