import {ao_fence_fn} from '../core.jsy'

export function ao_dom_animation() ::
  let tid, [_fence, _reset] = ao_fence_fn(raf)
  raf.stop = @::
    tid = cancelAnimationFrame(tid)
    raf.done = true
  return raf

  function raf() ::
    tid = requestAnimationFrame(_reset)
    return _fence()

