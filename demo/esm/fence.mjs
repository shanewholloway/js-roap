const ao_done$1 = Object.freeze({ao_done: true});
const ao_check_done = err => {
  if (err !== ao_done$1 && err && !err.ao_done) {
    throw err}
  return true};

function ao_defer_ctx(as_res = (...args) => args) {
  let y,n,_pset = (a,b) => { y=a, n=b; };
  return p =>(
    p = new Promise(_pset)
  , as_res(p, y, n)) }

function ao_fence_v(proto) {
  let x, p0, p=0, reset=ao_defer_ctx();

  let fence  = at =>(0===at ? p0 : 0!==p ? p : p=(x=reset())[0]);
  let resume = ans => xz(x[1], ans);
  let abort  = err => xz(x[2], err || ao_done$1);

  p0 = fence(); // initialize x, p, and p0
  return proto
    ?{__proto__: proto, fence, resume, abort}
    :[fence, resume, abort]

  function xz(xf, v) {
    if (0!==p) {
      p0 = p; p = 0;
      xf(v);} } }

async function * ao_iter_fence(fence) {
  try {
    while (1) {
      let r = await fence();
      if (undefined !== r) {
        yield r;} } }
  catch (err) {
    ao_check_done(err);} }



const _ao_fence_core_api_ = {
  ao_check_done

, // copyable fence fork api
  [Symbol.asyncIterator]() {
    return this.ao_fork()}

, ao_fork() {
    let ag = ao_iter_fence(this.fence);
    let {xemit} = this;
    return xemit ? xemit(ag) : ag} };


const ao_fence_obj = /* #__PURE__ */
  ao_fence_v.bind(null, _ao_fence_core_api_);

Promise.resolve({type:'init'});

function bind_output_log(el_output='output') {
  el_output = 'string' === typeof el_output
    ? document.querySelector(el_output)
    : el_output;

  return (( ... args ) => {
    console.log(... args);

    let el = document.createElement('p');
    el.textContent = args.flat().filter(Boolean).join(' ');
    el_output.insertBefore(el, el_output.firstChild);}) }


function bind_log(el_output='output') {
  return 'object' === typeof document
    ? bind_output_log(el_output)
    : console.log.bind(console)}

let out_log = bind_log('output');

let f = ao_fence_obj();
let tid = setInterval(Boolean, 1000);

{(async ()=>{
  let v;
  out_log("A start", {v});
  v = await f.fence();
  out_log("A1", {v});
  v = await f.fence();
  out_log("A2", {v});
  v = await f.fence();
  out_log("A3", {v});
  v = await f.fence();
  out_log("proc A done", {v}); })();}

{(async ()=>{
  let v;
  out_log("M start", {v});
  v = await f.fence();
  out_log("M1", {v});
  v = await f.fence();
  out_log("M2", {v});
  v = await f.fence();
  out_log("M3", {v});
  v = await f.fence();
  out_log("M4", {v});
  v = await f.fence();
  out_log("proc M done", {v}); })();}

{(async ()=>{
  for await (let v of f) {
    out_log("G", {v}); }

  out_log("proc G done");
  tid = clearInterval(tid);})();}

{(async ()=>{
  for (let i=1; i<10; i++) {
    let txt = `S${i}`;
    await txt;

    out_log('');
    out_log(txt);
    f.resume(txt);
    out_log('');}

  await 0;
  out_log("S done");
  f.fence.done = true;
  f.resume('bye');
  out_log("proc S done"); })();}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmVuY2UubWpzIiwic291cmNlcyI6WyIuLi8uLi9lc20vcm9hcC5tanMiLCIuLi9fZGVtb191dGlscy5qc3kiLCIuLi9mZW5jZS5qc3kiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaXNfYW9faXRlciA9IGcgPT5cbiAgbnVsbCAhPSBnW1N5bWJvbC5hc3luY0l0ZXJhdG9yXTtcblxuY29uc3QgaXNfYW9fZm4gPSB2X2ZuID0+XG4gICdmdW5jdGlvbicgPT09IHR5cGVvZiB2X2ZuXG4gICAgJiYgISBpc19hb19pdGVyKHZfZm4pO1xuXG5cbmNvbnN0IGFvX2RvbmUkMSA9IE9iamVjdC5mcmVlemUoe2FvX2RvbmU6IHRydWV9KTtcbmNvbnN0IGFvX2NoZWNrX2RvbmUgPSBlcnIgPT4ge1xuICBpZiAoZXJyICE9PSBhb19kb25lJDEgJiYgZXJyICYmICFlcnIuYW9fZG9uZSkge1xuICAgIHRocm93IGVycn1cbiAgcmV0dXJuIHRydWV9O1xuXG5cbmNvbnN0IF9hZ19jb3B5ID0gKHtnX2lufSwgYWdfb3V0KSA9PihcbiAgdW5kZWZpbmVkID09PSBnX2luID8gYWdfb3V0IDooXG4gICAgYWdfb3V0LmdfaW4gPSBnX2luXG4gICwgYWdfb3V0KSApO1xuXG5mdW5jdGlvbiBhb193aGVuX21hcChhb19mbl92LCBkYj1uZXcgTWFwKCkpIHtcbiAgbGV0IGF0ID0gayA9PiB7XG4gICAgbGV0IGUgPSBkYi5nZXQoayk7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gZSkge1xuICAgICAgZGIuc2V0KGssIGU9YW9fZm5fdigpKTt9XG4gICAgcmV0dXJuIGV9O1xuXG4gIGxldCBkZWZpbmUgPSAoaywgdikgPT4ge1xuICAgIGxldCBbciwgZm5dID0gYXQoayk7XG4gICAgZm4odik7IC8vIGUuZy4gZGVmZXJyZWQgcmVzb2x2ZSBvciBmZW5jZSByZXN1bWUoKVxuICAgIHJldHVybiByfTtcblxuICByZXR1cm4ge1xuICAgIGhhczogayA9PiBkYi5oYXMoaylcbiAgLCBnZXQ6IGsgPT4gYXQoaylbMF1cbiAgLCBzZXQ6IGRlZmluZSwgZGVmaW5lfSB9XG5cbmZ1bmN0aW9uIGFvX2RlZmVyX2N0eChhc19yZXMgPSAoLi4uYXJncykgPT4gYXJncykge1xuICBsZXQgeSxuLF9wc2V0ID0gKGEsYikgPT4geyB5PWEsIG49YjsgfTtcbiAgcmV0dXJuIHAgPT4oXG4gICAgcCA9IG5ldyBQcm9taXNlKF9wc2V0KVxuICAsIGFzX3JlcyhwLCB5LCBuKSkgfVxuXG5jb25zdCBhb19kZWZlcl92ID0gLyogI19fUFVSRV9fICovIGFvX2RlZmVyX2N0eCgpO1xuXG5jb25zdCBhb19kZWZlciA9IC8qICNfX1BVUkVfXyAqL1xuICBhb19kZWZlcl9jdHgoKHAseSxuKSA9PlxuICAgICh7cHJvbWlzZTogcCwgcmVzb2x2ZTogeSwgcmVqZWN0OiBufSkpO1xuXG5cbmZ1bmN0aW9uIGFvX3RyYWNrX3Yoc3RlcCwgcmVzZXRfdj1hb19kZWZlcl92KSB7XG4gIGxldCByLCBwLCB4PXJlc2V0X3YoKTtcbiAgbGV0IHJlc3VtZSA9IGFucyA9PiB4eih4WzFdLCBhbnMpO1xuICBsZXQgYWJvcnQgID0gZXJyID0+IHh6KHhbMl0sIGVyciB8fCBhb19kb25lKTtcbiAgcmV0dXJuIHIgPVtwPXhbMF0sIHJlc3VtZSwgYWJvcnRdXG5cbiAgZnVuY3Rpb24geHooeGYsIHYpIHtcbiAgICBsZXQgcDAgPSByWzBdID0gcDtcbiAgICBwID0gKHggPSByZXNldF92KCkpWzBdO1xuICAgIHhmKHYpO1xuICAgIGlmIChzdGVwKSB7c3RlcChwMCwgcCk7fSB9IH1cblxuXG5jb25zdCBhb190cmFja193aGVuID0gZGIgPT5cbiAgYW9fd2hlbl9tYXAoYW9fdHJhY2tfdiwgZGIpO1xuXG5jb25zdCBhb193aGVuID0gZGIgPT5cbiAgYW9fd2hlbl9tYXAoYW9fZGVmZXJfdiwgZGIpO1xuXG5hc3luYyBmdW5jdGlvbiBhb19ydW4oZ2VuX2luKSB7XG4gIGZvciBhd2FpdCAobGV0IHYgb2YgZ2VuX2luKSB7fSB9XG5cblxuYXN5bmMgZnVuY3Rpb24gYW9fZHJpdmUoZ2VuX2luLCBnZW5fdGd0LCBjbG9zZV90Z3QpIHtcbiAgaWYgKGlzX2FvX2ZuKGdlbl90Z3QpKSB7XG4gICAgZ2VuX3RndCA9IGdlbl90Z3QoKTtcbiAgICBnZW5fdGd0Lm5leHQoKTt9XG5cbiAgZm9yIGF3YWl0IChsZXQgdiBvZiBnZW5faW4pIHtcbiAgICBsZXQge2RvbmV9ID0gYXdhaXQgZ2VuX3RndC5uZXh0KHYpO1xuICAgIGlmIChkb25lKSB7YnJlYWt9IH1cblxuICBpZiAoY2xvc2VfdGd0KSB7XG4gICAgYXdhaXQgZ2VuX3RndC5yZXR1cm4oKTt9IH1cblxuXG5cbmZ1bmN0aW9uICogaXRlcihpdGVyYWJsZSkge1xuICByZXR1cm4gKHlpZWxkICogaXRlcmFibGUpfVxuXG5mdW5jdGlvbiBhb19zdGVwX2l0ZXIoaXRlcmFibGUsIG9yX21vcmUpIHtcbiAgaXRlcmFibGUgPSBhb19pdGVyKGl0ZXJhYmxlKTtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyAqIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGxldCB7dmFsdWUsIGRvbmV9ID0gYXdhaXQgaXRlcmFibGUubmV4dCgpO1xuICAgICAgICBpZiAoZG9uZSkge3JldHVybiB2YWx1ZX1cbiAgICAgICAgeWllbGQgdmFsdWU7fVxuICAgICAgd2hpbGUgKG9yX21vcmUpIH0gfSB9XG5cblxuZnVuY3Rpb24gc3RlcF9pdGVyKGl0ZXJhYmxlLCBvcl9tb3JlKSB7XG4gIGl0ZXJhYmxlID0gaXRlcihpdGVyYWJsZSk7XG4gIHJldHVybiB7XG4gICAgKltTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgZG8ge1xuICAgICAgICBsZXQge3ZhbHVlLCBkb25lfSA9IGl0ZXJhYmxlLm5leHQoKTtcbiAgICAgICAgaWYgKGRvbmUpIHtyZXR1cm4gdmFsdWV9XG4gICAgICAgIHlpZWxkIHZhbHVlO31cbiAgICAgIHdoaWxlIChvcl9tb3JlKSB9IH0gfVxuXG5cbmFzeW5jIGZ1bmN0aW9uICogYW9faXRlcihpdGVyYWJsZSkge1xuICByZXR1cm4gKHlpZWxkICogaXRlcmFibGUpfVxuXG5cbmFzeW5jIGZ1bmN0aW9uICogX2FvX2l0ZXJfZmVuY2VkKGl0ZXJhYmxlLCBmX2dhdGUsIGluaXRpYWw9ZmFsc2UpIHtcbiAgbGV0IGYgPSB0cnVlID09PSBpbml0aWFsID8gZl9nYXRlLmZlbmNlKCkgOiBpbml0aWFsO1xuICBmb3IgYXdhaXQgKGxldCB2IG9mIGl0ZXJhYmxlKSB7XG4gICAgYXdhaXQgZjtcbiAgICB5aWVsZCB2O1xuICAgIGYgPSBmX2dhdGUuZmVuY2UoKTt9IH1cblxuXG5jb25zdCBhb19pdGVyX2ZlbmNlZCA9ICguLi5hcmdzKSA9PlxuICBfYWdfY29weShhcmdzWzBdLCBfYW9faXRlcl9mZW5jZWQoLi4uYXJncykpO1xuXG5mdW5jdGlvbiBhb19mZW5jZV92KHByb3RvKSB7XG4gIGxldCB4LCBwMCwgcD0wLCByZXNldD1hb19kZWZlcl9jdHgoKTtcblxuICBsZXQgZmVuY2UgID0gYXQgPT4oMD09PWF0ID8gcDAgOiAwIT09cCA/IHAgOiBwPSh4PXJlc2V0KCkpWzBdKTtcbiAgbGV0IHJlc3VtZSA9IGFucyA9PiB4eih4WzFdLCBhbnMpO1xuICBsZXQgYWJvcnQgID0gZXJyID0+IHh6KHhbMl0sIGVyciB8fCBhb19kb25lJDEpO1xuXG4gIHAwID0gZmVuY2UoKTsgLy8gaW5pdGlhbGl6ZSB4LCBwLCBhbmQgcDBcbiAgcmV0dXJuIHByb3RvXG4gICAgP3tfX3Byb3RvX186IHByb3RvLCBmZW5jZSwgcmVzdW1lLCBhYm9ydH1cbiAgICA6W2ZlbmNlLCByZXN1bWUsIGFib3J0XVxuXG4gIGZ1bmN0aW9uIHh6KHhmLCB2KSB7XG4gICAgaWYgKDAhPT1wKSB7XG4gICAgICBwMCA9IHA7IHAgPSAwO1xuICAgICAgeGYodik7fSB9IH1cblxuY29uc3QgYW9fZmVuY2Vfd2hlbiA9IGRiID0+XG4gIGFvX3doZW5fbWFwKGFvX2ZlbmNlX3YsIGRiKTtcblxuYXN5bmMgZnVuY3Rpb24gKiBhb19pdGVyX2ZlbmNlKGZlbmNlKSB7XG4gIHRyeSB7XG4gICAgd2hpbGUgKDEpIHtcbiAgICAgIGxldCByID0gYXdhaXQgZmVuY2UoKTtcbiAgICAgIGlmICh1bmRlZmluZWQgIT09IHIpIHtcbiAgICAgICAgeWllbGQgcjt9IH0gfVxuICBjYXRjaCAoZXJyKSB7XG4gICAgYW9fY2hlY2tfZG9uZShlcnIpO30gfVxuXG5cblxuY29uc3QgX2FvX2ZlbmNlX2NvcmVfYXBpXyA9IHtcbiAgYW9fY2hlY2tfZG9uZVxuXG4sIC8vIGNvcHlhYmxlIGZlbmNlIGZvcmsgYXBpXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuYW9fZm9yaygpfVxuXG4sIGFvX2ZvcmsoKSB7XG4gICAgbGV0IGFnID0gYW9faXRlcl9mZW5jZSh0aGlzLmZlbmNlKTtcbiAgICBsZXQge3hlbWl0fSA9IHRoaXM7XG4gICAgcmV0dXJuIHhlbWl0ID8geGVtaXQoYWcpIDogYWd9IH07XG5cblxuZnVuY3Rpb24gYW9fZmVuY2VfZm4odGd0KSB7XG4gIGxldCBmID0gYW9fZmVuY2VfdigpO1xuICBpZiAodW5kZWZpbmVkID09PSB0Z3QpIHt0Z3QgPSBmWzBdO31cbiAgdGd0LmZlbmNlID0gT2JqZWN0LmFzc2lnbih0Z3QsIF9hb19mZW5jZV9jb3JlX2FwaV8pO1xuICByZXR1cm4gZn1cblxuXG5jb25zdCBhb19mZW5jZV9vYmogPSAvKiAjX19QVVJFX18gKi9cbiAgYW9fZmVuY2Vfdi5iaW5kKG51bGwsIF9hb19mZW5jZV9jb3JlX2FwaV8pO1xuXG5cbmZ1bmN0aW9uIGFzX2l0ZXJfcHJvdG8ocmVzdW1lLCBhYm9ydCwgZG9uZSA9IHRydWUpIHtcbiAgcmV0dXJuIHtcbiAgICBuZXh0OiB2ID0+KHt2YWx1ZTogcmVzdW1lKHYpLCBkb25lfSlcbiAgLCByZXR1cm46ICgpID0+KHt2YWx1ZTogYWJvcnQoYW9fZG9uZSQxKSwgZG9uZX0pXG4gICwgdGhyb3c6IChlcnIpID0+KHt2YWx1ZTogYWJvcnQoZXJyKSwgZG9uZX0pIH0gfVxuXG5mdW5jdGlvbiBhb19zcGxpdChpdGVyYWJsZSkge1xuICBsZXQgZl9vdXQgPSBhb19mZW5jZV9vYmooKTtcbiAgZl9vdXQud2hlbl9ydW4gPSBfYW9fcnVuKGl0ZXJhYmxlLCBmX291dCk7XG4gIGZfb3V0LmdfaW4gPSBpdGVyYWJsZS5nX2luO1xuICByZXR1cm4gZl9vdXR9XG5cbmFzeW5jIGZ1bmN0aW9uIF9hb19ydW4oaXRlcmFibGUsIGZfdGFwKSB7XG4gIHRyeSB7XG4gICAgZm9yIGF3YWl0IChsZXQgdiBvZiBpdGVyYWJsZSkge1xuICAgICAgZl90YXAucmVzdW1lKHYpO30gfVxuXG4gIGNhdGNoIChlcnIpIHtcbiAgICBhb19jaGVja19kb25lKGVycik7fVxuXG4gIGZpbmFsbHkge1xuICAgIGZfdGFwLmFib3J0KCk7fSB9XG5cblxuZnVuY3Rpb24gYW9fdGFwKGl0ZXJhYmxlKSB7XG4gIGxldCBmX3RhcCA9IGFvX2ZlbmNlX29iaigpO1xuICBsZXQgYWdfdGFwID0gX2FvX3RhcChpdGVyYWJsZSwgZl90YXApO1xuICBhZ190YXAuZl90YXAgPSBhZ190YXAuZl9vdXQgPSBmX3RhcDtcbiAgYWdfdGFwLmdfaW4gPSBmX3RhcC5nX2luID0gaXRlcmFibGUuZ19pbjtcbiAgcmV0dXJuIFtmX3RhcCwgYWdfdGFwXX1cblxuYXN5bmMgZnVuY3Rpb24gKiBfYW9fdGFwKGl0ZXJhYmxlLCBmX3RhcCkge1xuICB0cnkge1xuICAgIGZvciBhd2FpdCAobGV0IHYgb2YgaXRlcmFibGUpIHtcbiAgICAgIGZfdGFwLnJlc3VtZSh2KTtcbiAgICAgIHlpZWxkIHY7fSB9XG5cbiAgY2F0Y2ggKGVycikge1xuICAgIGFvX2NoZWNrX2RvbmUoZXJyKTt9XG5cbiAgZmluYWxseSB7XG4gICAgZl90YXAuYWJvcnQoKTt9IH1cblxuY29uc3QgYW9fZmVuY2Vfb3V0ID0gLyogI19fUFVSRV9fICovIGFvX2ZlbmNlX3YuYmluZChudWxsLHtcbiAgX19wcm90b19fOiBfYW9fZmVuY2VfY29yZV9hcGlfXG5cbiwgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gdGhpcy5hb19ib3VuZCgpfVxuLCBhb19ib3VuZCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2FvX2ZlbmNlX291dCBub3QgYm91bmQnKX1cbiwgX2FvX21hbnkoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdhb19mZW5jZV9vdXQgY29uc3VtZWQ7IGNvbnNpZGVyIC5hb19mb3JrKCkgb3IgLmFsbG93X21hbnkoKScpfVxuXG4sIGFsbG93X21hbnkoKSB7XG4gICAgbGV0IHthb19mb3JrLCBhb19ib3VuZCwgX2FvX21hbnl9ID0gdGhpcztcbiAgICBpZiAoX2FvX21hbnkgPT09IGFvX2JvdW5kKSB7XG4gICAgICB0aGlzLmFvX2JvdW5kID0gYW9fZm9yazt9XG4gICAgdGhpcy5fYW9fbWFueSA9IGFvX2Zvcms7XG4gICAgdGhpcy5hbGxvd19tYW55ID0gKCkgPT4gdGhpcztcbiAgICByZXR1cm4gdGhpc31cblxuLCBhb19ydW4oKSB7XG4gICAgbGV0IHt3aGVuX3J1bn0gPSB0aGlzO1xuICAgIGlmICh1bmRlZmluZWQgPT09IHdoZW5fcnVuKSB7XG4gICAgICB0aGlzLndoZW5fcnVuID0gd2hlbl9ydW4gPVxuICAgICAgICBhb19ydW4odGhpcy5hb19ib3VuZCgpKTsgfVxuICAgIHJldHVybiB3aGVuX3J1bn1cblxuLCBiaW5kX2dhdGVkKGZfZ2F0ZSkge1xuICAgIGxldCBhZ19vdXQgPSB0aGlzLl9hb19nYXRlZChmX2dhdGUpO1xuICAgIGFnX291dC5mX291dCA9IHRoaXM7XG4gICAgYWdfb3V0LmdfaW4gPSB0aGlzLmdfaW47XG4gICAgdGhpcy5hb19ib3VuZCA9ICgoKSA9PiB7XG4gICAgICBsZXQge3hlbWl0LCBfYW9fbWFueX0gPSB0aGlzO1xuICAgICAgdGhpcy5hb19ib3VuZCA9IF9hb19tYW55O1xuICAgICAgcmV0dXJuIHhlbWl0XG4gICAgICAgID8gX2FnX2NvcHkoYWdfb3V0LCB4ZW1pdChhZ19vdXQpKVxuICAgICAgICA6IGFnX291dH0pO1xuXG4gICAgcmV0dXJuIHRoaXN9XG5cbiwgYW9fZ2F0ZWQoZl9nYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMuYmluZF9nYXRlZChmX2dhdGUpLmFvX2JvdW5kKCl9XG5cbiwgX2FvX2dhdGVkKGZfZ2F0ZSkge3JldHVybiBhb2dfZ2F0ZWQodGhpcywgZl9nYXRlKX0gfSApO1xuXG5cbmFzeW5jIGZ1bmN0aW9uICogYW9nX2dhdGVkKGZfb3V0LCBmX2dhdGUpIHtcbiAgdHJ5IHtcbiAgICBmX291dC5yZXN1bWUoKTtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgbGV0IHYgPSBhd2FpdCBmX2dhdGUuZmVuY2UoKTtcbiAgICAgIHlpZWxkIHY7XG4gICAgICBmX291dC5yZXN1bWUodik7fSB9XG4gIGNhdGNoIChlcnIpIHtcbiAgICBhb19jaGVja19kb25lKGVycik7fVxuICBmaW5hbGx5IHtcbiAgICBmX291dC5hYm9ydCgpO1xuICAgIGlmIChmX2dhdGUuYWJvcnQpIHtcbiAgICAgIGZfZ2F0ZS5hYm9ydCgpO30gfSB9XG5cbmNvbnN0IGFvX2ZlZWRlciA9ICh7Z19pbn0pID0+IHYgPT4gZ19pbi5uZXh0KHYpO1xuY29uc3QgYW9fZmVlZGVyX3YgPSAoe2dfaW59KSA9PiAoLi4uYXJncykgPT4gZ19pbi5uZXh0KGFyZ3MpO1xuXG5cbmZ1bmN0aW9uIGFvZ19mZW5jZV94Zih4aW5pdCwgLi4uYXJncykge1xuICBsZXQgZl9pbiA9IGFvX2ZlbmNlX3Yoe30pLCBmX291dCA9IGFvX2ZlbmNlX3Yoe30pO1xuICBsZXQgZ19pbiA9IHhpbml0KGZfaW4sIGZfb3V0LCAuLi5hcmdzKTtcbiAgZ19pbi5uZXh0KCk7XG5cbiAgbGV0IHJlcyA9IGFvZ19nYXRlZChmX291dCwgZl9pbik7XG4gIHJlcy5mZW5jZSA9IGZfb3V0LmZlbmNlO1xuICByZXMuZ19pbiA9IGdfaW47XG4gIHJldHVybiByZXN9XG5cbmZ1bmN0aW9uIGFvX2ZlbmNlX2l0ZXIoLi4uYXJncykge1xuICByZXR1cm4gYW9nX2ZlbmNlX3hmKGFvZ19pdGVyLCAuLi5hcmdzKX1cblxuZnVuY3Rpb24gYW9fZmVuY2Vfc2luayguLi5hcmdzKSB7XG4gIHJldHVybiBhb2dfZmVuY2VfeGYoYW9nX3NpbmssIC4uLmFyZ3MpfVxuXG5cbmZ1bmN0aW9uICogYW9nX2l0ZXIoZl9pbiwgZl9nYXRlLCB4Zikge1xuICB0cnkge1xuICAgIHdoaWxlICgxKSB7XG4gICAgICBsZXQgdGlwID0geWllbGQ7XG4gICAgICBpZiAodW5kZWZpbmVkICE9PSB4Zikge1xuICAgICAgICB0aXAgPSAoeGYubmV4dCh0aXApKS52YWx1ZTt9XG4gICAgICBmX2luLnJlc3VtZSh0aXApO30gfVxuXG4gIGNhdGNoIChlcnIpIHtcbiAgICBhb19jaGVja19kb25lKGVycik7fVxuICBmaW5hbGx5IHtcbiAgICBmX2luLmFib3J0KCk7XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0geGYpIHtcbiAgICAgIHhmLnJldHVybigpO30gfSB9XG5cblxuYXN5bmMgZnVuY3Rpb24gKiBhb2dfc2luayhmX2luLCBmX2dhdGUsIHhmKSB7XG4gIHRyeSB7XG4gICAgd2hpbGUgKDEpIHtcbiAgICAgICB7XG4gICAgICAgIGxldCB0aXAgPSB5aWVsZDtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0geGYpIHtcbiAgICAgICAgICB0aXAgPSAoYXdhaXQgeGYubmV4dCh0aXApKS52YWx1ZTt9XG4gICAgICAgIGZfaW4ucmVzdW1lKHRpcCk7fVxuXG4gICAgICBpZiAodW5kZWZpbmVkICE9PSBmX2dhdGUpIHtcbiAgICAgICAgYXdhaXQgZl9nYXRlLmZlbmNlKCk7fSB9IH1cblxuICBjYXRjaCAoZXJyKSB7XG4gICAgYW9fY2hlY2tfZG9uZShlcnIpO31cbiAgZmluYWxseSB7XG4gICAgZl9pbi5hYm9ydCgpO1xuICAgIGlmICh1bmRlZmluZWQgIT09IHhmKSB7XG4gICAgICB4Zi5yZXR1cm4oKTt9IH0gfVxuXG5jb25zdCBhb194Zm9ybSA9IG5zX2dlbiA9PiBhb19mZW5jZV9pbigpLmFvX3hmb3JtKG5zX2dlbik7XG5jb25zdCBhb19mb2xkID0gbnNfZ2VuID0+IGFvX2ZlbmNlX2luKCkuYW9fZm9sZChuc19nZW4pO1xuY29uc3QgYW9fcXVldWUgPSBuc19nZW4gPT4gYW9fZmVuY2VfaW4oKS5hb19xdWV1ZShuc19nZW4pO1xuXG5jb25zdCBhb19mZW5jZV9pbiA9IC8qICNfX1BVUkVfXyAqLyBhb19mZW5jZV92LmJpbmQobnVsbCx7XG4gIF9fcHJvdG9fXzogX2FvX2ZlbmNlX2NvcmVfYXBpX1xuXG4sIGFvX2ZvbGQobnNfZ2VuKSB7cmV0dXJuIHRoaXMuYW9feGZvcm0oe3hpbml0OiBhb2dfaXRlciwgLi4uIG5zX2dlbn0pfVxuLCBhb19xdWV1ZShuc19nZW4pIHtyZXR1cm4gdGhpcy5hb194Zm9ybSh7eGluaXQ6IGFvZ19zaW5rLCAuLi4gbnNfZ2VufSl9XG5cbiwgYW9nX2l0ZXIoeGYpIHtyZXR1cm4gYW9nX2l0ZXIodGhpcyl9XG4sIGFvZ19zaW5rKGZfZ2F0ZSwgeGYpIHtyZXR1cm4gYW9nX3NpbmsodGhpcywgZl9nYXRlLCB4Zil9XG5cbiwgYW9feGZvcm0obnNfZ2VuPXt9KSB7XG4gICAgbGV0IGZfb3V0ID0gYW9fZmVuY2Vfb3V0KCk7XG5cbiAgICBsZXQge3hlbWl0LCB4aW5pdCwgeHJlY3Z9ID1cbiAgICAgIGlzX2FvX2ZuKG5zX2dlbilcbiAgICAgICAgPyBuc19nZW4odGhpcywgZl9vdXQpXG4gICAgICAgIDogbnNfZ2VuO1xuXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0geGVtaXQpIHtcbiAgICAgIGZfb3V0LnhlbWl0ID0geGVtaXQ7fVxuXG4gICAgaWYgKCEgeGluaXQpIHt4aW5pdCA9IGFvZ19zaW5rO31cbiAgICBsZXQgcmVzID0geGluaXQodGhpcywgZl9vdXQsXG4gICAgICB4cmVjdiA/IF94Zl9nZW4uY3JlYXRlKHhyZWN2KSA6IHVuZGVmaW5lZCk7XG5cbiAgICBsZXQgZ19pbiA9IGZfb3V0LmdfaW4gPSByZXMuZ19pbiB8fCByZXM7XG4gICAgcmV0dXJuIHJlcyAhPT0gZ19pblxuICAgICAgPyByZXMgLy8gcmVzIGlzIGFuIG91dHB1dCBnZW5lcmF0b3JcbiAgICAgIDooLy8gcmVzIGlzIGFuIGlucHV0IGdlbmVyYXRvclxuICAgICAgICAgIGdfaW4ubmV4dCgpLFxuICAgICAgICAgIGZfb3V0LmJpbmRfZ2F0ZWQodGhpcykpIH1cblxuLCAvLyBFUzIwMTUgZ2VuZXJhdG9yIGFwaVxuICBuZXh0KHYpIHtyZXR1cm4ge3ZhbHVlOiB0aGlzLnJlc3VtZSh2KSwgZG9uZTogdHJ1ZX19XG4sIHJldHVybigpIHtyZXR1cm4ge3ZhbHVlOiB0aGlzLmFib3J0KGFvX2RvbmUkMSksIGRvbmU6IHRydWV9fVxuLCB0aHJvdyhlcnIpIHtyZXR1cm4ge3ZhbHVlOiB0aGlzLmFib3J0KGVyciksIGRvbmU6IHRydWV9fSB9ICk7XG5cblxuY29uc3QgX3hmX2dlbiA9IHtcbiAgY3JlYXRlKHhmKSB7XG4gICAgbGV0IHNlbGYgPSB7X19wcm90b19fOiB0aGlzfTtcbiAgICBzZWxmLnhnID0geGYoc2VsZi54Zl9pbnYoKSk7XG4gICAgcmV0dXJuIHNlbGZ9XG5cbiwgKnhmX2ludigpIHtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgbGV0IHRpcCA9IHRoaXMuX3RpcDtcbiAgICAgIGlmICh0aGlzID09PSB0aXApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmRlcmZsb3cnKX1cbiAgICAgIGVsc2UgdGhpcy5fdGlwID0gdGhpcztcblxuICAgICAgeWllbGQgdGlwO30gfVxuXG4sIG5leHQodikge1xuICAgIHRoaXMuX3RpcCA9IHY7XG4gICAgcmV0dXJuIHRoaXMueGcubmV4dCh2KX1cblxuLCByZXR1cm4oKSB7dGhpcy54Zy5yZXR1cm4oKTt9XG4sIHRocm93KCkge3RoaXMueGcudGhyb3coKTt9IH07XG5cbmZ1bmN0aW9uIGFvX3B1c2hfc3RyZWFtKGFzX3ZlYykge1xuICBsZXQgcT1bXSwgW2ZlbmNlLCByZXN1bWUsIGFib3J0XSA9IGFvX2ZlbmNlX3YoKTtcbiAgbGV0IHN0cmVhbSA9IGFvX3N0cmVhbV9mZW5jZShmZW5jZSk7XG5cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oc3RyZWFtLHtcbiAgICBzdHJlYW1cbiAgLCBhYm9ydFxuICAsIHB1c2goLi4uIGFyZ3MpIHtcbiAgICAgIGlmICh0cnVlID09PSBhc192ZWMpIHtcbiAgICAgICAgcS5wdXNoKGFyZ3MpO31cbiAgICAgIGVsc2UgcS5wdXNoKC4uLiBhcmdzKTtcblxuICAgICAgcmVzdW1lKHEpO1xuICAgICAgcmV0dXJuIHEubGVuZ3RofSB9ICkgfVxuXG5cbmZ1bmN0aW9uIGFvX3N0cmVhbV9mZW5jZShmZW5jZSkge1xuICBsZXQgW3doZW5fZG9uZSwgcmVzX2RvbmUsIHJlal9kb25lXSA9IGFvX2RlZmVyX3YoKTtcbiAgbGV0IHJlcyA9IF9hb19zdHJlYW1fZmVuY2UoZmVuY2UsIHJlc19kb25lLCByZWpfZG9uZSk7XG4gIHJlcy53aGVuX2RvbmUgPSB3aGVuX2RvbmU7XG4gIHJldHVybiByZXN9XG5cblxuYXN5bmMgZnVuY3Rpb24gKiBfYW9fc3RyZWFtX2ZlbmNlKGZlbmNlLCByZXNvbHZlLCByZWplY3QpIHtcbiAgdHJ5IHtcbiAgICBsZXQgcF9yZWFkeSA9IGZlbmNlKCk7XG4gICAgd2hpbGUgKDEpIHtcbiAgICAgIGxldCBiYXRjaCA9IGF3YWl0IHBfcmVhZHk7XG4gICAgICBiYXRjaCA9IGJhdGNoLnNwbGljZSgwLCBiYXRjaC5sZW5ndGgpO1xuXG4gICAgICBwX3JlYWR5ID0gZmVuY2UoKTtcbiAgICAgIHlpZWxkICogYmF0Y2g7fSB9XG5cbiAgY2F0Y2ggKGVycikge1xuICAgIGlmICghZXJyIHx8IGVyci5hb19kb25lKSB7XG4gICAgICByZXNvbHZlKHRydWUpO31cbiAgICBlbHNlIHJlamVjdChlcnIpO30gfVxuXG5mdW5jdGlvbiBhb19pbnRlcnZhbChtcz0xMDAwKSB7XG4gIGxldCBbX2ZlbmNlLCBfcmVzdW1lLCBfYWJvcnRdID0gYW9fZmVuY2VfZm4oKTtcbiAgbGV0IHRpZCA9IHNldEludGVydmFsKF9yZXN1bWUsIG1zLCAxKTtcbiAgaWYgKHRpZC51bnJlZikge3RpZC51bnJlZigpO31cbiAgX2ZlbmNlLnN0b3AgPSAoKCkgPT4ge1xuICAgIHRpZCA9IGNsZWFySW50ZXJ2YWwodGlkKTtcbiAgICBfYWJvcnQoKTt9KTtcblxuICByZXR1cm4gX2ZlbmNlfVxuXG5cbmZ1bmN0aW9uIGFvX3RpbWVvdXQobXM9MTAwMCkge1xuICBsZXQgdGlkLCBbX2ZlbmNlLCBfcmVzdW1lXSA9IGFvX2ZlbmNlX2ZuKHRpbWVvdXQpO1xuICByZXR1cm4gdGltZW91dFxuXG4gIGZ1bmN0aW9uIHRpbWVvdXQoKSB7XG4gICAgdGlkID0gc2V0VGltZW91dChfcmVzdW1lLCBtcywgMSk7XG4gICAgaWYgKHRpZC51bnJlZikge3RpZC51bnJlZigpO31cbiAgICByZXR1cm4gX2ZlbmNlKCl9IH1cblxuXG5mdW5jdGlvbiBhb19kZWJvdW5jZShtcz0zMDAsIGFvX2l0ZXJhYmxlKSB7XG4gIGxldCB0aWQsIFtfZmVuY2UsIF9yZXN1bWVdID0gYW9fZmVuY2VfZm4oKTtcblxuICBfZmVuY2Uud2hlbl9ydW4gPSAoKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgbGV0IHA7XG4gICAgICBmb3IgYXdhaXQgKGxldCB2IG9mIGFvX2l0ZXJhYmxlKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aWQpO1xuICAgICAgICBwID0gX2ZlbmNlKCk7XG4gICAgICAgIHRpZCA9IHNldFRpbWVvdXQoX3Jlc3VtZSwgbXMsIHYpO31cblxuICAgICAgYXdhaXQgcDt9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgYW9fY2hlY2tfZG9uZShlcnIpO30gfSkoKSk7XG5cbiAgcmV0dXJuIF9mZW5jZX1cblxuXG5hc3luYyBmdW5jdGlvbiAqIGFvX3RpbWVzKGFvX2l0ZXJhYmxlKSB7XG4gIGxldCB0czAgPSBEYXRlLm5vdygpO1xuICBmb3IgYXdhaXQgKGxldCB2IG9mIGFvX2l0ZXJhYmxlKSB7XG4gICAgeWllbGQgRGF0ZS5ub3coKSAtIHRzMDt9IH1cblxuZnVuY3Rpb24gYW9fZG9tX2FuaW1hdGlvbigpIHtcbiAgbGV0IHRpZCwgW19mZW5jZSwgX3Jlc3VtZV0gPSBhb19mZW5jZV9mbihyYWYpO1xuICByYWYuc3RvcCA9ICgoKSA9PiB7XG4gICAgdGlkID0gY2FuY2VsQW5pbWF0aW9uRnJhbWUodGlkKTtcbiAgICByYWYuZG9uZSA9IHRydWU7fSk7XG5cbiAgcmV0dXJuIHJhZlxuXG4gIGZ1bmN0aW9uIHJhZigpIHtcbiAgICB0aWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoX3Jlc3VtZSk7XG4gICAgcmV0dXJuIF9mZW5jZSgpfSB9XG5cbmNvbnN0IF9ldnRfaW5pdCA9IFByb21pc2UucmVzb2x2ZSh7dHlwZTonaW5pdCd9KTtcbmZ1bmN0aW9uIGFvX2RvbV9saXN0ZW4oc2VsZj1hb19xdWV1ZSgpKSB7XG4gIHJldHVybiBfYmluZC5zZWxmID0gc2VsZiA9e1xuICAgIF9fcHJvdG9fXzogc2VsZlxuICAsIHdpdGhfZG9tKGRvbSwgZm4pIHtcbiAgICAgIHJldHVybiBkb20uYWRkRXZlbnRMaXN0ZW5lclxuICAgICAgICA/IF9hb193aXRoX2RvbShfYmluZCwgZm4sIGRvbSlcbiAgICAgICAgOiBfYW9fd2l0aF9kb21fdmVjKF9iaW5kLCBmbiwgZG9tKX0gfVxuXG4gIGZ1bmN0aW9uIF9iaW5kKGRvbSwgZm5fZXZ0LCBmbl9kb20pIHtcbiAgICByZXR1cm4gZXZ0ID0+IHtcbiAgICAgIGxldCB2ID0gZm5fZXZ0XG4gICAgICAgID8gZm5fZXZ0KGV2dCwgZG9tLCBmbl9kb20pXG4gICAgICAgIDogZm5fZG9tKGRvbSwgZXZ0KTtcblxuICAgICAgaWYgKG51bGwgIT0gdikge1xuICAgICAgICBzZWxmLmdfaW4ubmV4dCh2KTt9IH0gfSB9XG5cblxuZnVuY3Rpb24gX2FvX3dpdGhfZG9tKF9iaW5kLCBmbiwgZG9tKSB7XG4gIGxldCBfb25fZXZ0O1xuICBpZiAoaXNfYW9fZm4oZm4pKSB7XG4gICAgX2V2dF9pbml0LnRoZW4oXG4gICAgICBfb25fZXZ0ID0gX2JpbmQoZG9tLCB2b2lkIDAsIGZuKSk7IH1cblxuICByZXR1cm4ge1xuICAgIF9fcHJvdG9fXzogX2JpbmQuc2VsZlxuICAsIGxpc3RlbiguLi5hcmdzKSB7XG4gICAgICBsZXQgb3B0LCBldnRfZm4gPSBfb25fZXZ0O1xuXG4gICAgICBsZXQgbGFzdCA9IGFyZ3MucG9wKCk7XG4gICAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGxhc3QpIHtcbiAgICAgICAgZXZ0X2ZuID0gX2JpbmQoZG9tLCBsYXN0LCBfb25fZXZ0KTtcbiAgICAgICAgbGFzdCA9IGFyZ3MucG9wKCk7fVxuXG4gICAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBsYXN0KSB7XG4gICAgICAgIGFyZ3MucHVzaChsYXN0KTt9XG4gICAgICBlbHNlIG9wdCA9IGxhc3Q7XG5cbiAgICAgIGZvciAobGV0IGV2dCBvZiBhcmdzKSB7XG4gICAgICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIGV2dCwgZXZ0X2ZuLCBvcHQpOyB9XG5cbiAgICAgIHJldHVybiB0aGlzfSB9IH1cblxuXG5mdW5jdGlvbiBfYW9fd2l0aF9kb21fdmVjKF9iaW5kLCBmbiwgZWN0eF9saXN0KSB7XG4gIGVjdHhfbGlzdCA9IEFycmF5LmZyb20oZWN0eF9saXN0LFxuICAgIGRvbSA9PiBfYW9fd2l0aF9kb20oX2JpbmQsIGZuLCBkb20pKTtcblxuICByZXR1cm4ge1xuICAgIF9fcHJvdG9fXzogX2JpbmQuc2VsZlxuICAsIGxpc3RlbiguLi5hcmdzKSB7XG4gICAgICBmb3IgKGxldCBlY3R4IG9mIGVjdHhfbGlzdCkge1xuICAgICAgICBlY3R4Lmxpc3RlbiguLi5hcmdzKTt9XG4gICAgICByZXR1cm4gdGhpc30gfSB9XG5cbmV4cG9ydCB7IF9hZ19jb3B5LCBfYW9fZmVuY2VfY29yZV9hcGlfLCBfYW9faXRlcl9mZW5jZWQsIF9hb19ydW4sIF9hb190YXAsIGFvX2NoZWNrX2RvbmUsIGFvX2RlYm91bmNlLCBhb19kZWZlciwgYW9fZGVmZXJfY3R4LCBhb19kZWZlcl92LCBhb19kb21fYW5pbWF0aW9uLCBhb19kb21fbGlzdGVuLCBhb19kb25lJDEgYXMgYW9fZG9uZSwgYW9fZHJpdmUsIGFvX2ZlZWRlciwgYW9fZmVlZGVyX3YsIGFvX2ZlbmNlX2ZuLCBhb19mZW5jZV9pbiwgYW9fZmVuY2VfaXRlciwgYW9fZmVuY2Vfb2JqLCBhb19mZW5jZV9vdXQsIGFvX2ZlbmNlX3NpbmssIGFvX2ZlbmNlX3YsIGFvX2ZlbmNlX3doZW4sIGFvX2ZvbGQsIGFvX2ludGVydmFsLCBhb19pdGVyLCBhb19pdGVyX2ZlbmNlLCBhb19pdGVyX2ZlbmNlZCwgYW9fcHVzaF9zdHJlYW0sIGFvX3F1ZXVlLCBhb19ydW4sIGFvX3NwbGl0LCBhb19zdGVwX2l0ZXIsIGFvX3N0cmVhbV9mZW5jZSwgYW9fdGFwLCBhb190aW1lb3V0LCBhb190aW1lcywgYW9fdHJhY2tfdiwgYW9fdHJhY2tfd2hlbiwgYW9fd2hlbiwgYW9feGZvcm0sIGFvZ19mZW5jZV94ZiwgYW9nX2dhdGVkLCBhb2dfaXRlciwgYW9nX3NpbmssIGFzX2l0ZXJfcHJvdG8sIGlzX2FvX2ZuLCBpc19hb19pdGVyLCBpdGVyLCBzdGVwX2l0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvYXAubWpzLm1hcFxuIiwiZXhwb3J0IGZ1bmN0aW9uIGJpbmRfb3V0cHV0X2xvZyhlbF9vdXRwdXQ9J291dHB1dCcpIDo6XG4gIGVsX291dHB1dCA9ICdzdHJpbmcnID09PSB0eXBlb2YgZWxfb3V0cHV0XG4gICAgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsX291dHB1dClcbiAgICA6IGVsX291dHB1dFxuXG4gIHJldHVybiBAXFwgLi4uIGFyZ3MgOjpcbiAgICBjb25zb2xlLmxvZyBAIC4uLiBhcmdzXG5cbiAgICBsZXQgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICBlbC50ZXh0Q29udGVudCA9IGFyZ3MuZmxhdCgpLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJylcbiAgICBlbF9vdXRwdXQuaW5zZXJ0QmVmb3JlKGVsLCBlbF9vdXRwdXQuZmlyc3RDaGlsZClcblxuXG5leHBvcnQgZnVuY3Rpb24gYmluZF9sb2coZWxfb3V0cHV0PSdvdXRwdXQnKSA6OlxuICByZXR1cm4gJ29iamVjdCcgPT09IHR5cGVvZiBkb2N1bWVudFxuICAgID8gYmluZF9vdXRwdXRfbG9nKGVsX291dHB1dClcbiAgICA6IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSlcbiIsImltcG9ydCB7YW9fZmVuY2Vfb2JqfSBmcm9tICdyb2FwJ1xuXG5pbXBvcnQge2JpbmRfbG9nfSBmcm9tICcuL19kZW1vX3V0aWxzLmpzeSdcbmxldCBvdXRfbG9nID0gYmluZF9sb2coJ291dHB1dCcpXG5cbmxldCBmID0gYW9fZmVuY2Vfb2JqKClcbmxldCB0aWQgPSBzZXRJbnRlcnZhbChCb29sZWFuLCAxMDAwKVxuXG46OiE+XG4gIGxldCB2XG4gIG91dF9sb2cgQCBcIkEgc3RhcnRcIiwge3Z9XG4gIHYgPSBhd2FpdCBmLmZlbmNlKClcbiAgb3V0X2xvZyBAIFwiQTFcIiwge3Z9XG4gIHYgPSBhd2FpdCBmLmZlbmNlKClcbiAgb3V0X2xvZyBAIFwiQTJcIiwge3Z9XG4gIHYgPSBhd2FpdCBmLmZlbmNlKClcbiAgb3V0X2xvZyBAIFwiQTNcIiwge3Z9XG4gIHYgPSBhd2FpdCBmLmZlbmNlKClcbiAgb3V0X2xvZyBAIFwicHJvYyBBIGRvbmVcIiwge3Z9XG5cbjo6IT5cbiAgbGV0IHZcbiAgb3V0X2xvZyBAIFwiTSBzdGFydFwiLCB7dn1cbiAgdiA9IGF3YWl0IGYuZmVuY2UoKVxuICBvdXRfbG9nIEAgXCJNMVwiLCB7dn1cbiAgdiA9IGF3YWl0IGYuZmVuY2UoKVxuICBvdXRfbG9nIEAgXCJNMlwiLCB7dn1cbiAgdiA9IGF3YWl0IGYuZmVuY2UoKVxuICBvdXRfbG9nIEAgXCJNM1wiLCB7dn1cbiAgdiA9IGF3YWl0IGYuZmVuY2UoKVxuICBvdXRfbG9nIEAgXCJNNFwiLCB7dn1cbiAgdiA9IGF3YWl0IGYuZmVuY2UoKVxuICBvdXRfbG9nIEAgXCJwcm9jIE0gZG9uZVwiLCB7dn1cblxuOjohPlxuICBmb3IgYXdhaXQgbGV0IHYgb2YgZiA6OlxuICAgIG91dF9sb2cgQCBcIkdcIiwge3Z9XG5cbiAgb3V0X2xvZyBAIFwicHJvYyBHIGRvbmVcIlxuICB0aWQgPSBjbGVhckludGVydmFsKHRpZClcblxuOjohPlxuICBmb3IgbGV0IGk9MTsgaTwxMDsgaSsrIDo6XG4gICAgbGV0IHR4dCA9IGBTJHtpfWBcbiAgICBhd2FpdCB0eHRcblxuICAgIG91dF9sb2coJycpXG4gICAgb3V0X2xvZyh0eHQpXG4gICAgZi5yZXN1bWUodHh0KVxuICAgIG91dF9sb2coJycpXG5cbiAgYXdhaXQgMFxuICBvdXRfbG9nIEAgXCJTIGRvbmVcIlxuICBmLmZlbmNlLmRvbmUgPSB0cnVlXG4gIGYucmVzdW1lKCdieWUnKVxuICBvdXRfbG9nIEAgXCJwcm9jIFMgZG9uZVwiXG5cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFRQSxNQUFNLFNBQVMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDakQsTUFBTSxhQUFhLEdBQUcsR0FBRyxJQUFJO0FBQzdCLEVBQUUsSUFBSSxHQUFHLEtBQUssU0FBUyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUU7QUFDaEQsSUFBSSxNQUFNLEdBQUcsQ0FBQztBQUNkLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQztBQXdCZjtBQUNBLFNBQVMsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxLQUFLLElBQUksRUFBRTtBQUNsRCxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUN6QyxFQUFFLE9BQU8sQ0FBQztBQUNWLElBQUksQ0FBQyxHQUFHLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQztBQUMxQixJQUFJLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFxRnRCO0FBQ0EsU0FBUyxVQUFVLENBQUMsS0FBSyxFQUFFO0FBQzNCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLFlBQVksRUFBRSxDQUFDO0FBQ3ZDO0FBQ0EsRUFBRSxJQUFJLEtBQUssSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDakUsRUFBRSxJQUFJLE1BQU0sR0FBRyxHQUFHLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNwQyxFQUFFLElBQUksS0FBSyxJQUFJLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsSUFBSSxTQUFTLENBQUMsQ0FBQztBQUNqRDtBQUNBLEVBQUUsRUFBRSxHQUFHLEtBQUssRUFBRSxDQUFDO0FBQ2YsRUFBRSxPQUFPLEtBQUs7QUFDZCxLQUFLLENBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQztBQUM3QyxLQUFLLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLENBQUM7QUFDM0I7QUFDQSxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7QUFDckIsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDZixNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3BCLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBSWpCO0FBQ0EsaUJBQWlCLGFBQWEsQ0FBQyxLQUFLLEVBQUU7QUFDdEMsRUFBRSxJQUFJO0FBQ04sSUFBSSxPQUFPLENBQUMsRUFBRTtBQUNkLE1BQU0sSUFBSSxDQUFDLEdBQUcsTUFBTSxLQUFLLEVBQUUsQ0FBQztBQUM1QixNQUFNLElBQUksU0FBUyxLQUFLLENBQUMsRUFBRTtBQUMzQixRQUFRLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ3JCLEVBQUUsT0FBTyxHQUFHLEVBQUU7QUFDZCxJQUFJLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsTUFBTSxtQkFBbUIsR0FBRztBQUM1QixFQUFFLGFBQWE7QUFDZjtBQUNBO0FBQ0EsRUFBRSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsR0FBRztBQUMzQixJQUFJLE9BQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzFCO0FBQ0EsRUFBRSxPQUFPLEdBQUc7QUFDWixJQUFJLElBQUksRUFBRSxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCLElBQUksT0FBTyxLQUFLLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUM7QUFRckM7QUFDQTtBQUNBLE1BQU0sWUFBWTtBQUNsQixFQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLG1CQUFtQixDQUFDLENBQUM7QUE0VDdDO0FBQ2tCLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDOzttQ0NoZkwsUUFBUTtFQUNoRCxZQUFZLFFBQVE7Ozs7RUFJcEI7SUFDRSxZQUFhOztJQUViLGdDQUFnQyxHQUFHO0lBQ25DLGtEQUFrRCxHQUFHO0lBQ3JEOzs7NEJBRytCLFFBQVE7RUFDekMsT0FBTyxRQUFROzs7O0FDWGpCLHVCQUF1QixRQUFROztBQUUvQjtBQUNBOzs7RUFHRTtFQUNBLFFBQVMsU0FBVTtFQUNuQjtFQUNBLFFBQVMsSUFBSztFQUNkO0VBQ0EsUUFBUyxJQUFLO0VBQ2Q7RUFDQSxRQUFTLElBQUs7RUFDZDtFQUNBLFFBQVMsYUFBYzs7O0VBR3ZCO0VBQ0EsUUFBUyxTQUFVO0VBQ25CO0VBQ0EsUUFBUyxJQUFLO0VBQ2Q7RUFDQSxRQUFTLElBQUs7RUFDZDtFQUNBLFFBQVMsSUFBSztFQUNkO0VBQ0EsUUFBUyxJQUFLO0VBQ2Q7RUFDQSxRQUFTLGFBQWM7OzthQUdkO0lBQ1AsUUFBUyxHQUFJOztFQUVmLFFBQVM7RUFDVDs7O09BR0c7SUFDRCxVQUFVLElBQUksRUFBRTtJQUNoQjs7SUFFQSxRQUFRLEVBQUU7SUFDVjtJQUNBO0lBQ0EsUUFBUSxFQUFFOztFQUVaO0VBQ0EsUUFBUztFQUNUO0VBQ0EsU0FBUyxLQUFLO0VBQ2QsUUFBUyJ9
