const {
  assign: _obj_assign,
  defineProperties: _obj_props,
} = Object;

function ao_fence_v() {
  let p=0, _resume = ()=>{};
  let _pset = a => _resume = a;

  return [
    () => 0 !== p ? p
      : p = new Promise(_pset)

  , v => {p = 0; _resume(v);} ] }


const _ao_fence_api ={
  stop() {this.fence.done = true;}

, ao_fork() {
    return ao_fence_fork(this.fence)}

, [Symbol.asyncIterator]() {
    return this.ao_fork()} };

function ao_fence_fn(tgt) {
  let f = ao_fence_v();
  if (undefined === tgt) {tgt = f[0];}
  tgt.fence = _obj_assign(tgt, _ao_fence_api);
  return f}

function ao_fence_obj(tgt) {
  let f = ao_fence_fn(tgt);
  return {__proto__: _ao_fence_api
  , fence: tgt || f[0], reset: f[1]} }


async function * ao_fence_fork(fence) {
  while (! fence.done) {
    let v = await fence();
    if (fence.done) {
      return v}
    yield v;} }

let f = ao_fence_obj();
let tid = setInterval(Boolean, 1000);

{(async ()=>{
  let v;
  console.log("A start", {v});
  v = await f.fence();
  console.log("A1", {v});
  v = await f.fence();
  console.log("A2", {v});
  v = await f.fence();
  console.log("A3", {v});
  v = await f.fence();
  console.log("proc A done", {v}); })();}

{(async ()=>{
  let v;
  console.log("M start", {v});
  v = await f.fence();
  console.log("M1", {v});
  v = await f.fence();
  console.log("M2", {v});
  v = await f.fence();
  console.log("M3", {v});
  v = await f.fence();
  console.log("M4", {v});
  v = await f.fence();
  console.log("proc M done", {v}); })();}

{(async ()=>{
  for await (let v of f) {
    console.log("G", {v}); }

  console.log("proc G done");
  tid = clearInterval(tid);})();}

{(async ()=>{
  for (let i=1; i<10; i++) {
    let txt = `S${i}`;
    await txt;

    console.log('');
    console.log(txt);
    f.reset(txt);
    console.log('');}

  await 0;
  console.log("S done");
  f.fence.done = true;
  f.reset('bye');
  console.log("proc S done"); })();}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmVuY2UubWpzIiwic291cmNlcyI6WyIuLi8uLi9lc20vcm9hcC5tanMiLCIuLi9mZW5jZS5qc3kiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge1xuICBhc3NpZ246IF9vYmpfYXNzaWduLFxuICBkZWZpbmVQcm9wZXJ0aWVzOiBfb2JqX3Byb3BzLFxufSA9IE9iamVjdDtcblxuY29uc3Qge1xuICBpc0FycmF5OiBfaXNfYXJyYXksXG59ID0gQXJyYXk7XG5cbmNvbnN0IGlzX2FvX2l0ZXIgPSBnID0+XG4gIG51bGwgIT0gZ1tTeW1ib2wuYXN5bmNJdGVyYXRvcl07XG5cbmNvbnN0IF9pc19mbiA9IHZfZm4gPT5cbiAgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHZfZm5cbiAgICAmJiAhIGlzX2FvX2l0ZXIodl9mbik7XG5jb25zdCBfcmV0X2lkZW50ID0gdiA9PiB2O1xuXG5jb25zdCBfeGludm9rZSQxID0gdl9mbiA9PlxuICBfaXNfZm4odl9mbilcbiAgICA/IHZfZm4oKVxuICAgIDogdl9mbjtcblxuZnVuY3Rpb24gX3hwaXBlX3RndChwaXBlKSB7XG4gIGlmIChfaXNfZm4ocGlwZSkpIHtcbiAgICBwaXBlID0gcGlwZSgpO1xuICAgIHBpcGUubmV4dCgpO1xuICAgIHJldHVybiBwaXBlfVxuXG4gIHJldHVybiBwaXBlLmdfaW4gfHwgcGlwZX1cblxuZnVuY3Rpb24gKiBpdGVyKGdlbl9pbikge1xuICB5aWVsZCAqIF94aW52b2tlJDEoZ2VuX2luKTt9XG5cbmFzeW5jIGZ1bmN0aW9uICogYW9faXRlcihnZW5faW4pIHtcbiAgeWllbGQgKiBfeGludm9rZSQxKGdlbl9pbik7fVxuXG5cbmZ1bmN0aW9uIGZuX2NoYWluKHRhaWwsIGN0eCkge1xuICByZXR1cm4gX29ial9hc3NpZ24oY2hhaW4se1xuICAgIGNoYWluLCB0YWlsOiBfeGludm9rZSQxKHRhaWwpfSApXG5cbiAgZnVuY3Rpb24gY2hhaW4oZm4pIHtcbiAgICBjaGFpbi50YWlsID0gZm4oY2hhaW4udGFpbCwgY3R4KTtcbiAgICByZXR1cm4gY2hhaW59IH1cblxuXG5mdW5jdGlvbiBfd21fcGlwZV9jbG9zdXJlKHdtX2Fic2VudCkge1xuICBsZXQgd20gPSBuZXcgV2Vha01hcCgpO1xuICByZXR1cm4gcGlwZSA9PlxuICAgIF93bV9pdGVtKHdtLFxuICAgICAgcGlwZS5nX2luIHx8IHBpcGUsXG4gICAgICB3bV9hYnNlbnQpIH1cblxuZnVuY3Rpb24gX3dtX2Nsb3N1cmUod21fYWJzZW50KSB7XG4gIGxldCB3bSA9IG5ldyBXZWFrTWFwKCk7XG4gIHJldHVybiBrZXkgPT5cbiAgICBfd21faXRlbSh3bSxcbiAgICAgIGtleSwgd21fYWJzZW50KSB9XG5cbmZ1bmN0aW9uIF93bV9pdGVtKHdtLCB3bV9rZXksIHdtX2Fic2VudCkge1xuICBsZXQgaXRlbSA9IHdtLmdldCh3bV9rZXkpO1xuICBpZiAodW5kZWZpbmVkID09PSBpdGVtKSB7XG4gICAgaXRlbSA9IHdtX2Fic2VudCh3bV9rZXkpO1xuICAgIHdtLnNldCh3bV9rZXksIGl0ZW0pO31cbiAgcmV0dXJuIGl0ZW19XG5cbmNvbnN0IGFvX2RlZmVycmVkX3YgPSAoKCgpID0+IHtcbiAgbGV0IHksbixfcHNldCA9IChhLGIpID0+IHsgeT1hLCBuPWI7IH07XG4gIHJldHVybiBwID0+KFxuICAgIHAgPSBuZXcgUHJvbWlzZShfcHNldClcbiAgLCBbcCwgeSwgbl0pIH0pKCkpO1xuXG5jb25zdCBhb19kZWZlcnJlZCA9IHYgPT4oXG4gIHYgPSBhb19kZWZlcnJlZF92KClcbiwge3Byb21pc2U6IHZbMF0sIHJlc29sdmU6IHZbMV0sIHJlamVjdDogdlsyXX0pO1xuXG5mdW5jdGlvbiBhb19mZW5jZV92KCkge1xuICBsZXQgcD0wLCBfcmVzdW1lID0gKCk9Pnt9O1xuICBsZXQgX3BzZXQgPSBhID0+IF9yZXN1bWUgPSBhO1xuXG4gIHJldHVybiBbXG4gICAgKCkgPT4gMCAhPT0gcCA/IHBcbiAgICAgIDogcCA9IG5ldyBQcm9taXNlKF9wc2V0KVxuXG4gICwgdiA9PiB7cCA9IDA7IF9yZXN1bWUodik7fSBdIH1cblxuXG5jb25zdCBfYW9fZmVuY2VfYXBpID17XG4gIHN0b3AoKSB7dGhpcy5mZW5jZS5kb25lID0gdHJ1ZTt9XG5cbiwgYW9fZm9yaygpIHtcbiAgICByZXR1cm4gYW9fZmVuY2VfZm9yayh0aGlzLmZlbmNlKX1cblxuLCBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIHJldHVybiB0aGlzLmFvX2ZvcmsoKX0gfTtcblxuZnVuY3Rpb24gYW9fZmVuY2VfZm4odGd0KSB7XG4gIGxldCBmID0gYW9fZmVuY2VfdigpO1xuICBpZiAodW5kZWZpbmVkID09PSB0Z3QpIHt0Z3QgPSBmWzBdO31cbiAgdGd0LmZlbmNlID0gX29ial9hc3NpZ24odGd0LCBfYW9fZmVuY2VfYXBpKTtcbiAgcmV0dXJuIGZ9XG5cbmZ1bmN0aW9uIGFvX2ZlbmNlX29iaih0Z3QpIHtcbiAgbGV0IGYgPSBhb19mZW5jZV9mbih0Z3QpO1xuICByZXR1cm4ge19fcHJvdG9fXzogX2FvX2ZlbmNlX2FwaVxuICAsIGZlbmNlOiB0Z3QgfHwgZlswXSwgcmVzZXQ6IGZbMV19IH1cblxuXG5hc3luYyBmdW5jdGlvbiAqIGFvX2ZlbmNlX2ZvcmsoZmVuY2UpIHtcbiAgd2hpbGUgKCEgZmVuY2UuZG9uZSkge1xuICAgIGxldCB2ID0gYXdhaXQgZmVuY2UoKTtcbiAgICBpZiAoZmVuY2UuZG9uZSkge1xuICAgICAgcmV0dXJuIHZ9XG4gICAgeWllbGQgdjt9IH1cblxuXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gKiBhb19mZW5jZV9tYXJrcyhmZW5jZSwgb3B0KSA6OlxuLy8gICBsZXQge3NpZ25hbCwgdHJhaWxpbmcsIGluaXRpYWx9ID0gb3B0IHx8IHt9XG4vLyAgIGxldCBmID0gdHJ1ZSA9PT0gaW5pdGlhbFxuLy8gICAgID8gZmVuY2UoKSA6IGluaXRpYWxcbi8vXG4vLyAgIHdoaWxlICEgZmVuY2UuZG9uZSA6OlxuLy8gICAgIGxldCB2XG4vLyAgICAgaWYgdHJhaWxpbmcgOjpcbi8vICAgICAgIHYgPSBhd2FpdCBmXG4vLyAgICAgICBmID0gZmVuY2UoKVxuLy9cbi8vICAgICBlbHNlIDo6XG4vLyAgICAgICBmID0gZmVuY2UoKVxuLy8gICAgICAgdiA9IGF3YWl0IGZcbi8vXG4vLyAgICAgaWYgZmVuY2UuZG9uZSA6OlxuLy8gICAgICAgcmV0dXJuIHZcbi8vXG4vLyAgICAgaWYgX2lzX2ZuKHNpZ25hbCkgOjpcbi8vICAgICAgIHlpZWxkIHNpZ25hbCh2KVxuLy8gICAgIGVsc2UgaWYgc2lnbmFsIDo6XG4vLyAgICAgICB5aWVsZCBzaWduYWxcbi8vICAgICBlbHNlIHlpZWxkIHZcblxuYXN5bmMgZnVuY3Rpb24gYW9fcnVuKGdlbl9pbiwgbm90aWZ5PV9yZXRfaWRlbnQpIHtcbiAgZm9yIGF3YWl0IChsZXQgdiBvZiBfeGludm9rZSQxKGdlbl9pbikpIHtcbiAgICBub3RpZnkodik7fSB9XG5cblxuYXN5bmMgZnVuY3Rpb24gYW9fZHJpdmUoZ2VuX2luLCBnZW5fdGd0LCB4Zm9ybT1fcmV0X2lkZW50KSB7XG4gIGdlbl90Z3QgPSBfeHBpcGVfdGd0KGdlbl90Z3QpO1xuICBmb3IgYXdhaXQgKGxldCB2IG9mIF94aW52b2tlJDEoZ2VuX2luKSkge1xuICAgIGlmICh1bmRlZmluZWQgIT09IGdlbl90Z3QpIHtcbiAgICAgIHYgPSB4Zm9ybSh2KTtcbiAgICAgIGxldCB7ZG9uZX0gPSBhd2FpdCBnZW5fdGd0Lm5leHQodik7XG4gICAgICBpZiAoZG9uZSkge2JyZWFrfSB9IH0gfVxuXG5cbmZ1bmN0aW9uIGFvX3N0ZXBfaXRlcihpdGVyYWJsZSwgbXVsdGlwbGUpIHtcbiAgaXRlcmFibGUgPSBhb19pdGVyKGl0ZXJhYmxlKTtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyAqIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGxldCB7dmFsdWV9ID0gYXdhaXQgaXRlcmFibGUubmV4dCgpO1xuICAgICAgICB5aWVsZCB2YWx1ZTt9XG4gICAgICB3aGlsZSAobXVsdGlwbGUpIH0gfSB9XG5cblxuZnVuY3Rpb24gc3RlcF9pdGVyKGl0ZXJhYmxlLCBtdWx0aXBsZSkge1xuICBpdGVyYWJsZSA9IGl0ZXIoaXRlcmFibGUpO1xuICByZXR1cm4ge1xuICAgICpbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgbGV0IHt2YWx1ZX0gPSBpdGVyYWJsZS5uZXh0KCk7XG4gICAgICAgIHlpZWxkIHZhbHVlO31cbiAgICAgIHdoaWxlIChtdWx0aXBsZSkgfSB9IH1cblxuZnVuY3Rpb24gYW9fZm9yaygpIHtcbiAgcmV0dXJuIGFvX2ZlbmNlX2ZvcmsodGhpcy5mZW5jZSl9XG5cbmNvbnN0IF9hb190YXBfcHJvcHMgPXtcbiAgYW9fZm9yazp7dmFsdWU6IGFvX2Zvcmt9XG4sIGNoYWluOntnZXQoKSB7XG4gICAgcmV0dXJuIGZuX2NoYWluKHRoaXMsIHRoaXMpfSB9IH07XG5cbmZ1bmN0aW9uIGFvX3RhcChhZ19vdXQpIHtcbiAgcmV0dXJuIF9vYmpfcHJvcHMoX2FvX3RhcChhZ19vdXQpLCBfYW9fdGFwX3Byb3BzKSB9XG5cbmZ1bmN0aW9uIF9hb190YXAoYWdfb3V0KSB7XG4gIGxldCBbZmVuY2UsIHJlc2V0XSA9IGFvX2ZlbmNlX3YoKTtcbiAgbGV0IGdlbiA9ICgoYXN5bmMgZnVuY3Rpb24gKiAoKSB7XG4gICAgZmVuY2UuZG9uZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBmb3IgYXdhaXQgKGxldCB2IG9mIF94aW52b2tlJDEoYWdfb3V0KSkge1xuICAgICAgICByZXNldCh2KTtcbiAgICAgICAgeWllbGQgdjt9IH1cbiAgICBmaW5hbGx5IHtcbiAgICAgIGZlbmNlLmRvbmUgPSB0cnVlO1xuICAgICAgcmVzZXQoKTt9IH0pLmNhbGwodGhpcykpO1xuXG4gIGdlbi5mZW5jZSA9IGZlbmNlO1xuICByZXR1cm4gZ2VufVxuXG5cblxuY29uc3QgX2FvX3NwbGl0X2FwaSA9e1xuICBnZXQgY2hhaW4oKSB7XG4gICAgcmV0dXJuIGZuX2NoYWluKHRoaXMsIHRoaXMpfVxuLCBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdOiBhb19mb3JrXG4sIGFvX2Zvcmt9O1xuXG5mdW5jdGlvbiBhb19zcGxpdChhZ19vdXQpIHtcbiAgbGV0IGdlbiA9IF9hb190YXAoYWdfb3V0KTtcbiAgcmV0dXJuIHtcbiAgICBfX3Byb3RvX186IF9hb19zcGxpdF9hcGlcbiAgLCBmaW46IGFvX3J1bihnZW4pXG4gICwgZmVuY2U6IGdlbi5mZW5jZX0gfVxuXG5jb25zdCBfYXNfcGlwZV9lbmQgPSAoZyxucykgPT4gX29ial9hc3NpZ24oZywgbnMpO1xuXG4vL35+flxuLy8gUGlwZSBiYXNlIGFzIGdlbmVyYXRvciBpbiBjb21wb3NlZCBvYmplY3QtZnVuY3Rpb25hbCBpbXBsZW1lbnRhdGlvblxuXG5jb25zdCBfYW9fcGlwZV9iYXNlID17XG4gIHhmb2xkOiB2ID0+IHYgLy8gb24gcHVzaDogaWRlbnRpdHkgdHJhbnNmb3JtXG4sIHhwdWxsKCkge30gLy8gbWVtb3J5OiBub25lXG4sIHhlbWl0OiBfeGludm9rZSQxIC8vIGlkZW50aXR5IHRyYW5zZm9ybSBvciBpbnZva2UgaWYgZnVuY3Rpb25cbiwgeGluaXQoZ19pbiwgYWdfb3V0KSB7fSAvLyBvbiBpbml0OiBkZWZhdWx0IGJlaGF2aW9yXG5cbiwgZ2V0IGNyZWF0ZSgpIHtcbiAgICAvLyBhcyBnZXR0ZXIgdG8gYmluZCBjbGFzcyBhcyBgdGhpc2AgYXQgYWNjZXNzIHRpbWVcbiAgICBjb25zdCBjcmVhdGUgPSAoLi4uIGFyZ3MpID0+XG4gICAgICBfb2JqX2Fzc2lnbih7X19wcm90b19fOiB0aGlzfSxcbiAgICAgICAgLi4uIGFyZ3MubWFwKF94aW52b2tlJDEpKVxuICAgICAgLl9hb19waXBlKCk7XG5cbiAgICByZXR1cm4gY3JlYXRlLmNyZWF0ZSA9IGNyZWF0ZX1cblxuLCBfYW9fcGlwZSgpIHtcbiAgICBsZXQgZmluX2xzdCA9IFtdO1xuICAgIGxldCBzZWxmID17XG4gICAgICBvbl9maW46IGcgPT4oXG4gICAgICAgIGZpbl9sc3QucHVzaChnKVxuICAgICAgLCBnKVxuXG4gICAgLCBzdG9wOiAoKCkgPT4ge1xuICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICBfZmluX3BpcGUoZmluX2xzdCk7XG4gICAgICAgIHRoaXMuX3Jlc3VtZSgpO30pIH07XG5cbiAgICBsZXQge2tpbmR9ID0gdGhpcztcbiAgICBsZXQgZ19pbiA9IHNlbGYub25fZmluKHRoaXMuX2FvX3BpcGVfaW4oc2VsZi5zdG9wKSk7XG4gICAgbGV0IGFnX291dCA9IHNlbGYub25fZmluKHRoaXMuX2FvX3BpcGVfb3V0KHNlbGYuc3RvcCkpO1xuXG4gICAgc2VsZi5nX2luID0gZ19pbiA9IHRoaXMuX2FzX3BpcGVfaW4oZ19pbiwgc2VsZiwga2luZCk7XG4gICAgYWdfb3V0ID0gdGhpcy5fYXNfcGlwZV9vdXQoYWdfb3V0LCBzZWxmLCBraW5kKTtcblxuICAgIHRoaXMueGluaXQoZ19pbiwgYWdfb3V0KTtcblxuICAgIC8vIGFsbG93IGdfaW4gdG8gaW5pdGlhbGl6ZVxuICAgIGdfaW4ubmV4dCgpO1xuICAgIHJldHVybiBhZ19vdXR9XG5cbiwgX2FzX3BpcGVfaW46IF9hc19waXBlX2VuZFxuLCBfYXNfcGlwZV9vdXQ6IF9hc19waXBlX2VuZFxuXG4sIC8vfn5+XG4gIC8vIFVwc3RyZWFtIGlucHV0IGdlbmVyYXRvclxuICAvLyAgIGRlc2lnbmVkIGZvciBtdWx0aXBsZSBmZWVkZXJzXG5cbiAgKl9hb19waXBlX2luKF9maW5pc2gpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHY7XG4gICAgICB3aGlsZSAoISB0aGlzLmRvbmUpIHtcbiAgICAgICAgdiA9IHRoaXMueGZvbGQoeWllbGQgdik7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2O1xuICAgICAgICBpZiAoMCAhPT0gdGhpcy5fd2FpdGluZyAmJiB1bmRlZmluZWQgIT09IHYpIHtcbiAgICAgICAgICB0aGlzLl9yZXN1bWUoKTt9IH0gfVxuXG4gICAgZmluYWxseSB7XG4gICAgICBfZmluaXNoKCk7fSB9XG5cblxuLCAvL35+flxuICAvLyBEb3duc3RyZWFtIGFzeW5jIG91dHB1dCBnZW5lcmF0b3JcbiAgLy8gICBkZXNpZ25lZCBmb3Igc2luZ2xlIGNvbnN1bWVyLlxuXG4gIGFzeW5jICpfYW9fcGlwZV9vdXQoX2ZpbmlzaCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcjtcbiAgICAgIHdoaWxlICghIHRoaXMuZG9uZSkge1xuICAgICAgICBpZiAoMCAhPT0gKHIgPSB0aGlzLl93YWl0aW5nKSkge1xuICAgICAgICAgIC8vIHAwOiBleGlzdGluZyB3YWl0ZXJzXG4gICAgICAgICAgciA9IGF3YWl0IHI7XG4gICAgICAgICAgaWYgKHRoaXMuZG9uZSkge2JyZWFrfSB9XG4gICAgICAgIGVsc2UgaWYgKHVuZGVmaW5lZCAhPT0gKHIgPSB0aGlzLnZhbHVlKSkge1xuICAgICAgICAgIC8vIHAxOiBhdmFpbGFibGUgdmFsdWVcbiAgICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO31cbiAgICAgICAgZWxzZSBpZiAodW5kZWZpbmVkICE9PSAociA9IHRoaXMueHB1bGwoKSkpIHtcbiAgICAgICAgICB9Ly8gcDI6IHhwdWxsIHZhbHVlIChlLmcuIHF1ZXVlIG1lbW9yeSkgXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIHAzOiBhZGQgbmV3IHdhaXRlclxuICAgICAgICAgIHIgPSBhd2FpdCB0aGlzLl9iaW5kX3dhaXRpbmcoKTtcbiAgICAgICAgICBpZiAodGhpcy5kb25lKSB7YnJlYWt9IH1cblxuICAgICAgICB5aWVsZCB0aGlzLnhlbWl0KHIpO30gfVxuXG4gICAgZmluYWxseSB7XG4gICAgICBfZmluaXNoKCk7fSB9XG5cblxuLCAvL35+flxuICAvLyBnZW5lcmF0b3ItbGlrZSB2YWx1ZS9kb25lIHN0YXRlc1xuXG4gIHZhbHVlOiB1bmRlZmluZWRcbiwgZG9uZTogZmFsc2VcblxuLCAvL35+flxuICAvLyBwcm9taXNlLWJhc2VkIGZlbmNlIHRhaWxvcmVkIGZvciBhb19waXBlIHVzZWNhc2VcblxuICBfd2FpdGluZzogMFxuLCBfZnVsZmlsbCgpIHt9XG4sIGFzeW5jIF9yZXN1bWUoKSB7XG4gICAgaWYgKCEgdGhpcy5kb25lKSB7YXdhaXQgdGhpczt9XG5cbiAgICBsZXQge3ZhbHVlLCBfZnVsZmlsbH0gPSB0aGlzO1xuICAgIGlmICh1bmRlZmluZWQgIT0gdmFsdWUgfHwgdGhpcy5kb25lKSB7XG4gICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fd2FpdGluZyA9IDA7XG4gICAgICBfZnVsZmlsbCh2YWx1ZSk7fSB9XG5cbiwgX2JpbmRfd2FpdGluZygpIHtcbiAgICBsZXQgX3Jlc2V0ID0geSA9PiB0aGlzLl9mdWxmaWxsID0geTtcbiAgICB0aGlzLl9iaW5kX3dhaXRpbmcgPSAoKSA9PiB0aGlzLl93YWl0aW5nIHx8KFxuICAgICAgdGhpcy5fd2FpdGluZyA9IG5ldyBQcm9taXNlKF9yZXNldCkpO1xuICAgIHJldHVybiB0aGlzLl9iaW5kX3dhaXRpbmcoKX0gfTtcblxuXG5mdW5jdGlvbiBfZmluX3BpcGUoZmluX2xzdCkge1xuICB3aGlsZSAoMCAhPT0gZmluX2xzdC5sZW5ndGgpIHtcbiAgICBsZXQgZyA9IGZpbl9sc3QucG9wKCk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChfaXNfZm4oZykpIHtnKCk7fVxuICAgICAgZWxzZSBnLnJldHVybigpO31cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgVHlwZUVycm9yKSB7XG4gICAgICAgIGlmICgnR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZycgPT09IGVyci5tZXNzYWdlKSB7XG4gICAgICAgICAgY29udGludWV9IH1cbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTt9IH0gfVxuXG5jb25zdCBfYW9fcGlwZV9pbl9hcGkgPXtcbiAgYXNfcGlwZV9pbihzZWxmLCBnX2luKSB7fVxuXG4sIHdpdGhfY3R4KHhjdHgpIHtcbiAgICBpZiAoX2lzX2ZuKHhjdHgpKSB7XG4gICAgICB4Y3R4ID0geGN0eCh0aGlzKTt9XG5cbiAgICBpZiAoeGN0eCAmJiB4Y3R4Lm5leHQpIHtcbiAgICAgIHhjdHgubmV4dCh0aGlzKTtcbiAgICAgIHRoaXMub25fZmluKHhjdHgpO31cbiAgICByZXR1cm4geGN0eH1cblxuLCBmZWVkKHhzcmMsIHhmb3JtKSB7XG4gICAgcmV0dXJuIGFvX2RyaXZlKHhzcmMsIHRoaXMsIHhmb3JtKX1cblxuLCBiaW5kX3ZlYyguLi4ga2V5cykge1xuICAgIHJldHVybiB2ID0+IHRoaXMubmV4dChbLi4ua2V5cywgdl0pIH1cblxuLCBiaW5kX29iaihrZXksIG5zKSB7XG4gICAgcmV0dXJuIHYgPT4gdGhpcy5uZXh0KHsuLi5ucywgW2tleV06IHZ9KSB9IH07XG5cbmZ1bmN0aW9uIF9hb19waXBlX2luKGdfaW4sIHNlbGYpIHtcbiAgcmV0dXJuIF9vYmpfYXNzaWduKGdfaW4sIF9hb19waXBlX2luX2FwaSwgc2VsZil9XG5cbmNvbnN0IF9hb19waXBlX291dF9raW5kcyA9e1xuICBhb19yYXc6IGcgPT4gZ1xuLCBhb19zcGxpdDogYW9fc3BsaXRcbiwgYW9fdGFwOiBhb190YXB9O1xuXG5mdW5jdGlvbiBfYW9fcGlwZV9vdXQoYWdfb3V0LCBzZWxmLCBraW5kKSB7XG4gIGtpbmQgPSAvXmFvXy8udGVzdChraW5kKSA/IGtpbmQgOiAnYW9fJytraW5kO1xuICBsZXQgYW9fd3JhcCA9IF9hb19waXBlX291dF9raW5kc1traW5kXTtcbiAgaWYgKHVuZGVmaW5lZCA9PT0gYW9fd3JhcCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm9ud24gYW9fcGlwZV9vdXQga2luZCBcIiR7a2luZH1cImApfVxuXG4gIHJldHVybiBfb2JqX2Fzc2lnbihhb193cmFwKGFnX291dCksIHNlbGYpIH1cblxuY29uc3QgX2FvX3BpcGUgPXtcbiAgX19wcm90b19fOiBfYW9fcGlwZV9iYXNlXG5cbiwgLy8geGZvbGQ6IHYgPT4gdiAtLSBvbiBwdXNoOiBpZGVudGl0eSB0cmFuc2Zvcm1cbiAgLy8geHB1bGwoKSB7fSAtLSBtZW1vcnk6IG5vbmVcbiAgLy8geGVtaXQ6IF94aW52b2tlIC0tIGlkZW50aXR5IHRyYW5zZm9ybSBvciBpbnZva2UgaWYgZnVuY3Rpb25cblxuICAvLyAqeGdmb2xkKCkgLS0gb24gcHVzaDogZ2VuZXJhdG9yLWJhc2VkIGZvbGQgaW1wbFxuICAvLyAqeHNyYygpIC0tIGZlZWQgd2l0aCBzb3VyY2UgZ2VuZXJhdG9yXG4gIC8vICp4Y3R4KGdlbl9zcmMpIC0tIG9uIGluaXQ6IGJpbmQgZXZlbnQgc291cmNlc1xuXG4gIGtpbmQ6ICdzcGxpdCdcbiwgX2FzX3BpcGVfaW46IF9hb19waXBlX2luXG4sIF9hc19waXBlX291dDogX2FvX3BpcGVfb3V0XG5cbiwgeGluaXQoZ19pbikge1xuICAgIGxldCB4Z2ZvbGQgPSB0aGlzLnhnZm9sZDtcbiAgICBpZiAodW5kZWZpbmVkICE9PSB4Z2ZvbGQpIHtcbiAgICAgIHRoaXMuX2luaXRfeGdmb2xkKGdfaW4sIHhnZm9sZCk7fVxuXG4gICAgdGhpcy5faW5pdF9jaGFpbihnX2luKTt9XG5cblxuLCBfaW5pdF94Z2ZvbGQoZ19pbiwgeGdmb2xkKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0geGdmb2xkKSB7XG4gICAgICByZXR1cm59XG5cbiAgICBpZiAoX2lzX2ZuKHhnZm9sZCkpIHtcbiAgICAgIHhnZm9sZCA9IHhnZm9sZC5jYWxsKHRoaXMsIHRoaXMpO1xuXG4gICAgICBpZiAoX2lzX2ZuKHhnZm9sZCkpIHtcbiAgICAgICAgdGhpcy54Zm9sZCA9IHhnZm9sZDtcbiAgICAgICAgcmV0dXJuIHRydWV9XG5cbiAgICAgIHhnZm9sZC5uZXh0KCk7fVxuXG4gICAgdGhpcy54Z2ZvbGQgPSB4Z2ZvbGQ7XG4gICAgdGhpcy54Zm9sZCA9IHRoaXMuX2ZvbGRfZ2VuO1xuICAgIGdfaW4ub25fZmluKHhnZm9sZCk7XG4gICAgcmV0dXJuIHRydWV9XG5cbiwgX2ZvbGRfZ2VuKHYpIHtcbiAgICBsZXQge2RvbmUsIHZhbHVlfSA9IHRoaXMueGdmb2xkLm5leHQodik7XG4gICAgaWYgKGRvbmUpIHt0aGlzLmRvbmUgPSB0cnVlO31cbiAgICByZXR1cm4gdmFsdWV9XG5cblxuLCBfaW5pdF9jaGFpbihnX2luKSB7XG4gICAgbGV0IHt4c3JjLCB4Y3R4fSA9IHRoaXM7XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0geHNyYykge1xuICAgICAgZ19pbi5mZWVkKHhzcmMpXG4gICAgICAgIC50aGVuICgoKSA9PmdfaW4ucmV0dXJuKCkpOyB9XG5cbiAgICBpZiAodW5kZWZpbmVkICE9PSB4Y3R4KSB7XG4gICAgICBnX2luLndpdGhfY3R4KHhjdHgpO30gfSB9O1xuXG5cbmNvbnN0IGFvX3BpcGUgPSBfYW9fcGlwZS5jcmVhdGU7XG5cbmZ1bmN0aW9uIGFvX2ludGVydmFsKG1zPTEwMDApIHtcbiAgbGV0IFtfZmVuY2UsIF9yZXNldF0gPSBhb19mZW5jZV9mbigpO1xuICBsZXQgdGlkID0gc2V0SW50ZXJ2YWwoX3Jlc2V0LCBtcywgMSk7XG4gIGlmICh0aWQudW5yZWYpIHt0aWQudW5yZWYoKTt9XG4gIF9mZW5jZS5zdG9wID0gKCgpID0+IHtcbiAgICB0aWQgPSBjbGVhckludGVydmFsKHRpZCk7XG4gICAgX2ZlbmNlLmRvbmUgPSB0cnVlO30pO1xuICByZXR1cm4gX2ZlbmNlfVxuXG5cbmZ1bmN0aW9uIGFvX3RpbWVvdXQobXM9MTAwMCkge1xuICBsZXQgdGlkLCBbX2ZlbmNlLCBfcmVzZXRdID0gYW9fZmVuY2VfZm4odGltZW91dCk7XG4gIHJldHVybiB0aW1lb3V0XG5cbiAgZnVuY3Rpb24gdGltZW91dCgpIHtcbiAgICB0aWQgPSBzZXRUaW1lb3V0KF9yZXNldCwgbXMsIDEpO1xuICAgIGlmICh0aWQudW5yZWYpIHt0aWQudW5yZWYoKTt9XG4gICAgcmV0dXJuIF9mZW5jZSgpfSB9XG5cblxuZnVuY3Rpb24gYW9fZGVib3VuY2UobXM9MzAwLCBnZW5faW4pIHtcbiAgbGV0IHRpZCwgW19mZW5jZSwgX3Jlc2V0XSA9IGFvX2ZlbmNlX2ZuKCk7XG5cbiAgX2ZlbmNlLmZpbiA9ICgoYXN5bmMgKCkgPT4ge1xuICAgIGZvciBhd2FpdCAobGV0IHYgb2YgX3hpbnZva2UoZ2VuX2luKSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpZCk7XG4gICAgICB0aWQgPSBzZXRUaW1lb3V0KF9yZXNldCwgbXMsIHYpO30gfSkoKSk7XG5cbiAgcmV0dXJuIF9mZW5jZX1cblxuXG5hc3luYyBmdW5jdGlvbiAqIGFvX3RpbWVzKGdlbl9pbikge1xuICBsZXQgdHMwID0gRGF0ZS5ub3coKTtcbiAgZm9yIGF3YWl0IChsZXQgdiBvZiBnZW5faW4pIHtcbiAgICB5aWVsZCBEYXRlLm5vdygpIC0gdHMwO30gfVxuXG5mdW5jdGlvbiBhb19kb21fYW5pbWF0aW9uKCkge1xuICBsZXQgdGlkLCBbX2ZlbmNlLCBfcmVzZXRdID0gYW9fZmVuY2VfZm4ocmFmKTtcbiAgcmFmLnN0b3AgPSAoKCkgPT4ge1xuICAgIHRpZCA9IGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRpZCk7XG4gICAgcmFmLmRvbmUgPSB0cnVlO30pO1xuICByZXR1cm4gcmFmXG5cbiAgZnVuY3Rpb24gcmFmKCkge1xuICAgIHRpZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShfcmVzZXQpO1xuICAgIHJldHVybiBfZmVuY2UoKX0gfVxuXG5jb25zdCBhb19kb21fZXZlbnRzID1cbiAgX3dtX3BpcGVfY2xvc3VyZShfYW9fZG9tX2V2ZW50c19jdHgpO1xuXG5mdW5jdGlvbiBfYW9fZG9tX2V2ZW50c19jdHgoZ19pbikge1xuICByZXR1cm4ge19fcHJvdG9fXzogX2RvbV9ldmVudHNfYXBpXG4gICwgd21fZWxlbXM6IG5ldyBXZWFrTWFwKClcbiAgLCBlbWl0OiBpbmZvID0+IGdfaW4ubmV4dChpbmZvKX0gfVxuXG5cbmNvbnN0IF9kb21fZXZlbnRzX2FwaSA9e1xuICAvLyB3bV9lbGVtczogbmV3IFdlYWtNYXAoKVxuICAvLyBlbWl0OiBpbmZvID0+IGdfaW4ubmV4dChpbmZvKVxuXG4gIGxpc3RlbihlbGVtLCBldnQsIHhmbiwgZXZ0X29wdCkge1xuICAgIGxldCB7ZW1pdCwgaW5mb30gPSB0aGlzO1xuICAgICB7XG4gICAgICBsZXQgZW0gPSBfd21faXRlbSh0aGlzLndtX2VsZW1zLCBlbGVtLCBfZWxlbV9tYXBfZW50cnkpO1xuICAgICAgaW5mbyA9ey4uLiBpbmZvLCAuLi4gZW0uaW5mbywgZXZ0fTtcblxuICAgICAgbGV0IGV2dDAgPSBldnQuc3BsaXQoL1tfLl0vLCAxKVswXTtcbiAgICAgIGlmICgnaW5pdCcgPT09IGV2dDApIHtcbiAgICAgICAgZXZ0X2ZuKGVsZW0pO1xuICAgICAgICByZXR1cm4gdGhpc31cblxuICAgICAgbGV0IG9sZF9mbiA9IGVtLmdldChldnQpO1xuXG4gICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoZXZ0MCwgZXZ0X2ZuLCBldnRfb3B0KTtcbiAgICAgIGVtLnNldChldnQsIGV2dF9mbik7XG5cbiAgICAgIGlmICh1bmRlZmluZWQgIT09IG9sZF9mbikge1xuICAgICAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0MCwgb2xkX2ZuKTsgfVxuXG4gICAgICBpZiAoJ21lc3NhZ2UnID09PSBldnQwICYmIF9pc19mbihlbGVtLnN0YXJ0KSkge1xuICAgICAgICBlbGVtLnN0YXJ0KCk7fSB9XG5cbiAgICByZXR1cm4gdGhpc1xuXG4gICAgZnVuY3Rpb24gZXZ0X2ZuKGUpIHtcbiAgICAgIGxldCB2ID0geGZuKGUsIGVtaXQsIGluZm8pO1xuICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gdikge1xuICAgICAgICBlbWl0KHsuLi4gaW5mbywgdn0pOyB9IH0gfVxuXG5cbiwgcmVtb3ZlKGVsZW0sIC4uLiBrZXlzKSB7XG4gICAgbGV0IHt3bV9lbGVtc30gPSB0aGlzO1xuICAgIGxldCBldnRfbWFwID0gd21fZWxlbXMuZ2V0KGVsZW0pIHx8IG5ldyBNYXAoKTtcblxuICAgIGxldCBldl9wYWlycztcbiAgICBpZiAoMCA9PT0ga2V5cy5sZW5ndGgpIHtcbiAgICAgIHdtX2VsZW1zLmRlbGV0ZShlbGVtKTtcbiAgICAgIGV2X3BhaXJzID0gZXZ0X21hcC5lbnRyaWVzKCk7fVxuXG4gICAgZWxzZSB7XG4gICAgICBldl9wYWlycyA9IGtleXMubWFwKFxuICAgICAgICBldnQwID0+IFtldnQwLCBldnRfbWFwLmdldChldnQwKV0pOyB9XG5cbiAgICBmb3IgKGxldCBbZXZ0MCwgZXZ0X2ZuXSBvZiBldl9wYWlycykge1xuICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gZXZ0X2ZuKSB7XG4gICAgICAgIGV2dF9tYXAuZGVsZXRlKGV2dDApO1xuICAgICAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0MCwgZXZ0X2ZuKTt9IH1cbiAgICByZXR1cm4gdGhpc31cblxuXG4sIHNldF9pbmZvKGVsLCBpbmZvKSB7XG4gICAgbGV0IGVtID0gX3dtX2l0ZW0odGhpcy53bV9lbGVtcywgZWwsIF9lbGVtX21hcF9lbnRyeSk7XG4gICAgX29ial9hc3NpZ24oZW0uaW5mbywgaW5mbyk7XG4gICAgcmV0dXJuIHRoaXN9XG5cbiwgd2l0aCguLi4gbnNfYXJncykge1xuICAgIGxldCB7bGlzdGVuLCBzZXRfaW5mbywgaW5mb30gPSB0aGlzO1xuICAgIHNldF9pbmZvID0gc2V0X2luZm8uYmluZCh0aGlzKTtcblxuICAgIGZvciAobGV0IG5zIG9mIG5zX2FyZ3MpIHtcbiAgICAgIGxldCBuc190aGlzID0gdW5kZWZpbmVkID09PSBucy5pbmZvID8gdGhpcyA6XG4gICAgICAgIHtfX3Byb3RvX186IHRoaXMsIGluZm86ey4uLiBpbmZvLCAuLi4gbnMuaW5mb319O1xuXG4gICAgICBsZXQgZXZlbnRzID1bLi4uIF9pdGVyX2V2ZW50X2xpc3QobnMpXTtcbiAgICAgIGZvciAobGV0IGVsZW0gb2YgX2l0ZXJfbmFtZWRfZWxlbXMobnMuJCwgc2V0X2luZm8pKSB7XG4gICAgICAgIGZvciAobGV0IGV2dF9hcmdzIG9mIGV2ZW50cykge1xuICAgICAgICAgIGxpc3Rlbi5jYWxsKG5zX3RoaXMsIGVsZW0sIC4uLiBldnRfYXJncyk7fSB9IH1cblxuICAgIHJldHVybiB0aGlzfSB9O1xuXG5cbmZ1bmN0aW9uIF9lbGVtX21hcF9lbnRyeShlbGVtKSB7XG4gIGxldCBrID0gZWxlbS5uYW1lIHx8IGVsZW0uaWRcbiAgICB8fCAoZWxlbS50eXBlIHx8IGVsZW0udGFnTmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKVxuICAgIHx8IGVsZW1bU3ltYm9sLnRvU3RyaW5nVGFnXTtcblxuICBsZXQgbSA9IG5ldyBNYXAoKTtcbiAgbS5pbmZvID17ZG9tX2l0ZW06IGssIGt9O1xuICByZXR1cm4gbX1cblxuXG5mdW5jdGlvbiAqIF9pdGVyX25hbWVkX2VsZW1zKGxzdCwgc2V0X2luZm8pIHtcbiAgbHN0ID0gX2lzX2FycmF5KGxzdCkgPyBsc3RcbiAgICA6IGxzdC5hZGRFdmVudExpc3RlbmVyID8gW2xzdF1cbiAgICA6IE9iamVjdC5lbnRyaWVzKGxzdCk7XG5cbiAgZm9yIChsZXQgZWEgb2YgbHN0KSB7XG4gICAgaWYgKF9pc19hcnJheShlYSkpIHtcbiAgICAgIHNldF9pbmZvKGVhWzFdLCB7azogZWFbMF19KTtcbiAgICAgIHlpZWxkIGVhWzFdO31cblxuICAgIGVsc2UgeWllbGQgZWE7fSB9XG5cblxuZnVuY3Rpb24gKiBfaXRlcl9ldmVudF9saXN0KG5zKSB7XG4gIGZvciAobGV0IFthdHRyLCBlZm5dIG9mIE9iamVjdC5lbnRyaWVzKG5zKSkge1xuICAgIGlmICghIGVmbiB8fCAvW15hLXpdLy50ZXN0KGF0dHIpKSB7XG4gICAgICBjb250aW51ZX1cblxuICAgIGF0dHIgPSBhdHRyLnJlcGxhY2UoJ18nLCAnLicpO1xuICAgIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZWZuKSB7XG4gICAgICB5aWVsZCBbYXR0ciwgZWZuLCBlZm4uZXZ0X29wdF07fVxuXG4gICAgZWxzZSBpZiAoZWZuLm9uX2V2dCB8fCBlZm4uZXZ0X29wdCkge1xuICAgICAgeWllbGQgW2F0dHIsIGVmbi5vbl9ldnQsIGVmbi5ldnRfb3B0XTt9IH0gfVxuXG5leHBvcnQgeyBfYW9fZG9tX2V2ZW50c19jdHgsIF9hb19waXBlLCBfYW9fcGlwZV9iYXNlLCBfYW9fcGlwZV9pbiwgX2FvX3BpcGVfaW5fYXBpLCBfYW9fcGlwZV9vdXQsIF9hb19waXBlX291dF9raW5kcywgX2FvX3RhcCwgX2RvbV9ldmVudHNfYXBpLCBfd21fY2xvc3VyZSwgX3dtX2l0ZW0sIF93bV9waXBlX2Nsb3N1cmUsIF94aW52b2tlJDEgYXMgX3hpbnZva2UsIF94cGlwZV90Z3QsIGFvX2RlYm91bmNlLCBhb19kZWZlcnJlZCwgYW9fZGVmZXJyZWRfdiwgYW9fZG9tX2FuaW1hdGlvbiwgYW9fZG9tX2V2ZW50cywgYW9fZHJpdmUsIGFvX2ZlbmNlX2ZuLCBhb19mZW5jZV9mb3JrLCBhb19mZW5jZV9vYmosIGFvX2ZlbmNlX3YsIGFvX2ludGVydmFsLCBhb19pdGVyLCBhb19waXBlLCBhb19ydW4sIGFvX3NwbGl0LCBhb19zdGVwX2l0ZXIsIGFvX3RhcCwgYW9fdGltZW91dCwgYW9fdGltZXMsIGZuX2NoYWluLCBpc19hb19pdGVyLCBpdGVyLCBzdGVwX2l0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvYXAubWpzLm1hcFxuIiwiaW1wb3J0IHthb19mZW5jZV9vYmp9IGZyb20gJ3JvYXAnXG5cbmxldCBmID0gYW9fZmVuY2Vfb2JqKClcbmxldCB0aWQgPSBzZXRJbnRlcnZhbChCb29sZWFuLCAxMDAwKVxuXG46OiE+XG4gIGxldCB2XG4gIGNvbnNvbGUubG9nIEAgXCJBIHN0YXJ0XCIsIHt2fVxuICB2ID0gYXdhaXQgZi5mZW5jZSgpXG4gIGNvbnNvbGUubG9nIEAgXCJBMVwiLCB7dn1cbiAgdiA9IGF3YWl0IGYuZmVuY2UoKVxuICBjb25zb2xlLmxvZyBAIFwiQTJcIiwge3Z9XG4gIHYgPSBhd2FpdCBmLmZlbmNlKClcbiAgY29uc29sZS5sb2cgQCBcIkEzXCIsIHt2fVxuICB2ID0gYXdhaXQgZi5mZW5jZSgpXG4gIGNvbnNvbGUubG9nIEAgXCJwcm9jIEEgZG9uZVwiLCB7dn1cblxuOjohPlxuICBsZXQgdlxuICBjb25zb2xlLmxvZyBAIFwiTSBzdGFydFwiLCB7dn1cbiAgdiA9IGF3YWl0IGYuZmVuY2UoKVxuICBjb25zb2xlLmxvZyBAIFwiTTFcIiwge3Z9XG4gIHYgPSBhd2FpdCBmLmZlbmNlKClcbiAgY29uc29sZS5sb2cgQCBcIk0yXCIsIHt2fVxuICB2ID0gYXdhaXQgZi5mZW5jZSgpXG4gIGNvbnNvbGUubG9nIEAgXCJNM1wiLCB7dn1cbiAgdiA9IGF3YWl0IGYuZmVuY2UoKVxuICBjb25zb2xlLmxvZyBAIFwiTTRcIiwge3Z9XG4gIHYgPSBhd2FpdCBmLmZlbmNlKClcbiAgY29uc29sZS5sb2cgQCBcInByb2MgTSBkb25lXCIsIHt2fVxuXG46OiE+XG4gIGZvciBhd2FpdCBsZXQgdiBvZiBmIDo6XG4gICAgY29uc29sZS5sb2cgQCBcIkdcIiwge3Z9XG5cbiAgY29uc29sZS5sb2cgQCBcInByb2MgRyBkb25lXCJcbiAgdGlkID0gY2xlYXJJbnRlcnZhbCh0aWQpXG5cbjo6IT5cbiAgZm9yIGxldCBpPTE7IGk8MTA7IGkrKyA6OlxuICAgIGxldCB0eHQgPSBgUyR7aX1gXG4gICAgYXdhaXQgdHh0XG5cbiAgICBjb25zb2xlLmxvZygnJylcbiAgICBjb25zb2xlLmxvZyh0eHQpXG4gICAgZi5yZXNldCh0eHQpXG4gICAgY29uc29sZS5sb2coJycpXG5cbiAgYXdhaXQgMFxuICBjb25zb2xlLmxvZyBAIFwiUyBkb25lXCJcbiAgZi5mZW5jZS5kb25lID0gdHJ1ZVxuICBmLnJlc2V0KCdieWUnKVxuICBjb25zb2xlLmxvZyBAIFwicHJvYyBTIGRvbmVcIlxuXG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtBQUNOLEVBQUUsTUFBTSxFQUFFLFdBQVc7QUFDckIsRUFBRSxnQkFBZ0IsRUFBRSxVQUFVO0FBQzlCLENBQUMsR0FBRyxNQUFNLENBQUM7QUF3RVg7QUFDQSxTQUFTLFVBQVUsR0FBRztBQUN0QixFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLEdBQUcsSUFBSSxFQUFFLENBQUM7QUFDNUIsRUFBRSxJQUFJLEtBQUssR0FBRyxDQUFDLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQztBQUMvQjtBQUNBLEVBQUUsT0FBTztBQUNULElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7QUFDckIsUUFBUSxDQUFDLEdBQUcsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDO0FBQzlCO0FBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ2pDO0FBQ0E7QUFDQSxNQUFNLGFBQWEsRUFBRTtBQUNyQixFQUFFLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ2xDO0FBQ0EsRUFBRSxPQUFPLEdBQUc7QUFDWixJQUFJLE9BQU8sYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNyQztBQUNBLEVBQUUsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUc7QUFDM0IsSUFBSSxPQUFPLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7QUFDN0I7QUFDQSxTQUFTLFdBQVcsQ0FBQyxHQUFHLEVBQUU7QUFDMUIsRUFBRSxJQUFJLENBQUMsR0FBRyxVQUFVLEVBQUUsQ0FBQztBQUN2QixFQUFFLElBQUksU0FBUyxLQUFLLEdBQUcsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0QyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxhQUFhLENBQUMsQ0FBQztBQUM5QyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ1g7QUFDQSxTQUFTLFlBQVksQ0FBQyxHQUFHLEVBQUU7QUFDM0IsRUFBRSxJQUFJLENBQUMsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDM0IsRUFBRSxPQUFPLENBQUMsU0FBUyxFQUFFLGFBQWE7QUFDbEMsSUFBSSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDdEM7QUFDQTtBQUNBLGlCQUFpQixhQUFhLENBQUMsS0FBSyxFQUFFO0FBQ3RDLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxJQUFJLEVBQUU7QUFDdkIsSUFBSSxJQUFJLENBQUMsR0FBRyxNQUFNLEtBQUssRUFBRSxDQUFDO0FBQzFCLElBQUksSUFBSSxLQUFLLENBQUMsSUFBSSxFQUFFO0FBQ3BCLE1BQU0sT0FBTyxDQUFDLENBQUM7QUFDZixJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUM7O0FDL0diO0FBQ0E7OztFQUdFO0VBQ0EsWUFBYSxTQUFVO0VBQ3ZCO0VBQ0EsWUFBYSxJQUFLO0VBQ2xCO0VBQ0EsWUFBYSxJQUFLO0VBQ2xCO0VBQ0EsWUFBYSxJQUFLO0VBQ2xCO0VBQ0EsWUFBYSxhQUFjOzs7RUFHM0I7RUFDQSxZQUFhLFNBQVU7RUFDdkI7RUFDQSxZQUFhLElBQUs7RUFDbEI7RUFDQSxZQUFhLElBQUs7RUFDbEI7RUFDQSxZQUFhLElBQUs7RUFDbEI7RUFDQSxZQUFhLElBQUs7RUFDbEI7RUFDQSxZQUFhLGFBQWM7OzthQUdsQjtJQUNQLFlBQWEsR0FBSTs7RUFFbkIsWUFBYTtFQUNiOzs7T0FHRztJQUNELFVBQVUsSUFBSSxFQUFFO0lBQ2hCOztJQUVBLFlBQVksRUFBRTtJQUNkO0lBQ0E7SUFDQSxZQUFZLEVBQUU7O0VBRWhCO0VBQ0EsWUFBYTtFQUNiO0VBQ0EsUUFBUSxLQUFLO0VBQ2IsWUFBYSJ9
