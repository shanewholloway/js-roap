const { assert, expect } = require('chai')
export @{} assert, expect

export const delay = (ms=1) => 
  new Promise @ y =>
    setTimeout @ y, ms, 'timeout'

export const delay_race = (p, ms=1) => 
  Promise.race @# p, delay(ms)

export function is_fn(fn) ::
  assert.equal @ 'function', typeof fn
  return fn

export function is_gen(g) ::
  is_fn(g.next)
  is_fn(g.return)
  is_fn(g.throw)
  return g

export function is_async_iterable(o) ::
  assert @ null != o[Symbol.asyncIterator], 'async iterable'
  return o

